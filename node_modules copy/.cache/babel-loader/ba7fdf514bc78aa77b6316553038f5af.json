{"ast":null,"code":"import _objectSpread from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/SchoolPortal/Profile.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  p {\\n    font-size: 18px;\\n    font-family: Apercu;\\n    font-weight: 500;\\n    line-height: 22px;\\n    letter-spacing: 0.05em;\\n  }\\n\\n  .nodescription {\\n    margin-bottom: 10px;\\n  }\\n\\n  .description {\\n    font-size: 16px;\\n    font-family: Apercu-light;\\n    margin-bottom: 10px;\\n  }\\n\\n  .inputcontainer {\\n    display: table;\\n  }\\n\\n  .input {\\n    width: 300px;\\n    height: 40px;\\n    background: #f4f2f2;\\n    border: 0px;\\n    margin-bottom: 5px;\\n    margin-right: 10px;\\n  }\\n\\n  .buttonsymbol {\\n    line-height: 29px;\\n  }\\n\\n  .roundbutton {\\n    height: 35px;\\n    width: 35px;\\n    border: 3px solid #bd574e;\\n    border-radius: 50%;\\n    display: inline-block;\\n    background: rgba(249, 198, 195, 0.8);\\n    color: #bd574e;\\n    text-align: center;\\n    vertical-align: middle;\\n    cursor: pointer;\\n  }\\n\\n  .savechanges {\\n    background: #bd574e;\\n    color: #ffffff;\\n    font-family: Apercu;\\n    font-size: 18px;\\n    width: 170px;\\n    height: 38px;\\n    letter-spacing: 0.05em;\\n    align-items: center;\\n    margin-top: 20px;\\n  }\\n\\n  .checkmark {\\n    margin-right: 4px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport Header from 'components/Header';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect, firebaseConnect, isLoaded } from 'react-redux-firebase';\nimport Loading from 'components/Loading';\nvar profileStyle = css(_templateObject());\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n\n    _this.dictToArray = function (dict) {\n      var newArray = [];\n\n      for (var key in dict) {\n        newArray.push(dict[key]);\n      }\n\n      return newArray;\n    };\n\n    _this.addInput = function (name) {\n      // append empty string to end of array\n      _this.setState(_defineProperty({}, name, [].concat(_toConsumableArray(_this.state[name].slice()), [''])));\n    };\n\n    _this.removeInput = function (index, inputs, name) {\n      delete inputs[index];\n\n      _this.setState(_defineProperty({}, name, _this.dictToArray(inputs)));\n    };\n\n    _this.editInput = function (index, value, inputs, name) {\n      inputs[index] = value;\n\n      _this.setState(_defineProperty({}, name, _this.dictToArray(inputs)));\n    };\n\n    _this.assignSettings = function () {\n      var _this$props = _this.props,\n          school = _this$props.school,\n          updateSettings = _this$props.updateSettings;\n      var settings = _this.state.settings;\n      var college_to_dorm = settings.college_to_dorm,\n          email_to_college = settings.email_to_college;\n\n      var emails = _this.state.emails.filter(function (email) {\n        return email !== '';\n      });\n\n      var dorms = _this.state.dorms.filter(function (dorm) {\n        return dorm !== '';\n      }); // reject this school's emails to override\n\n\n      var emailsDict = Object.keys(email_to_college).reduce(function (map, email) {\n        if (email_to_college[email] !== school) {\n          map[email] = email_to_college[email];\n        }\n\n        return map;\n      }, {});\n      emailsDict = emails.reduce(function (map, email) {\n        map[email] = school;\n        return map;\n      }, emailsDict);\n\n      var newSettings = _objectSpread({}, settings, {\n        college_to_dorm: _objectSpread({}, college_to_dorm, _defineProperty({}, school, dorms)),\n        email_to_college: emailsDict\n      });\n\n      updateSettings(newSettings);\n      alert('Config saved!');\n    };\n\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$props2 = this.props,\n          school = _this$props2.school,\n          settings = _this$props2.settings;\n\n      if (isLoaded(settings) && this.state.loading) {\n        var college_to_dorm = settings.college_to_dorm,\n            email_to_college = settings.email_to_college;\n        this.setState({\n          dorms: college_to_dorm[school] || [],\n          emails: Object.keys(email_to_college).filter(function (email) {\n            return email_to_college[email] === school;\n          }) || [],\n          loading: false,\n          settings: settings\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          dorms = _this$state.dorms,\n          emails = _this$state.emails,\n          loading = _this$state.loading;\n\n      if (loading) {\n        return jsx(\"div\", {\n          style: {\n            height: 200\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, jsx(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }));\n      }\n\n      return jsx(\"div\", {\n        css: profileStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, jsx(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"SCHOOL\"), jsx(\"p\", {\n        className: \"nodescription\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Valid Email Suffix\"), jsx(InputList, {\n        addInput: this.addInput,\n        editInput: this.editInput,\n        inputs: emails,\n        name: \"emails\",\n        removeInput: this.removeInput,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Dorms\"), jsx(\"div\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Add your dorm names here!\"), jsx(InputList, {\n        addInput: this.addInput,\n        editInput: this.editInput,\n        inputs: dorms,\n        name: \"dorms\",\n        removeInput: this.removeInput,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), jsx(\"button\", {\n        className: \"savechanges\",\n        onClick: this.assignSettings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, jsx(\"i\", {\n        className: \"fas fa-check checkmark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), \"Save Changes\"));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nvar InputList =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(InputList, _Component2);\n\n  function InputList() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, InputList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(InputList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this2.onClick = function () {\n      var _this2$props = _this2.props,\n          addInput = _this2$props.addInput,\n          name = _this2$props.name;\n      addInput(name);\n    };\n\n    return _this2;\n  }\n\n  _createClass(InputList, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var inputs = this.props.inputs;\n      var dict = {};\n\n      for (var i = 0; i < inputs.length; i++) {\n        dict[i] = inputs[i];\n      }\n\n      return jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, Object.keys(dict).map(function (index) {\n        return jsx(Input, Object.assign({\n          index: index,\n          inputs: dict,\n          key: index\n        }, _this3.props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }));\n      })), jsx(\"div\", {\n        className: \"roundbutton\",\n        onClick: this.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, jsx(\"i\", {\n        className: \"fas fa-plus buttonsymbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return InputList;\n}(Component);\n\nvar Input =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(Input, _Component3);\n\n  function Input() {\n    var _getPrototypeOf3;\n\n    var _this4;\n\n    _classCallCheck(this, Input);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this4 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(Input)).call.apply(_getPrototypeOf3, [this].concat(args)));\n\n    _this4.onChange = function (event) {\n      var _this4$props = _this4.props,\n          editInput = _this4$props.editInput,\n          index = _this4$props.index,\n          inputs = _this4$props.inputs,\n          name = _this4$props.name;\n      editInput(index, event.target.value, inputs, name);\n    };\n\n    _this4.onClick = function () {\n      var _this4$props2 = _this4.props,\n          index = _this4$props2.index,\n          inputs = _this4$props2.inputs,\n          name = _this4$props2.name,\n          removeInput = _this4$props2.removeInput;\n      removeInput(index, inputs, name);\n    };\n\n    return _this4;\n  }\n\n  _createClass(Input, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          index = _this$props3.index,\n          inputs = _this$props3.inputs;\n      return jsx(\"div\", {\n        className: \"inputcontainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, jsx(\"input\", {\n        className: \"input\",\n        onChange: this.onChange,\n        type: \"text\",\n        value: inputs[index],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }), jsx(\"div\", {\n        className: \"roundbutton\",\n        onClick: this.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, jsx(\"i\", {\n        className: \"fas fa-minus buttonsymbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Input;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    settings: state.firestore.data.config,\n    updateSettings: function updateSettings(settings) {\n      props.firestore.update({\n        collection: 'settings',\n        doc: 'config'\n      }, settings);\n    }\n  };\n};\n\nexport default compose(firebaseConnect(), firestoreConnect(function () {\n  return [{\n    collection: 'settings',\n    doc: 'config',\n    storeAs: 'config'\n  }];\n}), connect(mapStateToProps))(Profile);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/SchoolPortal/Profile.js"],"names":["Component","jsx","css","Header","connect","compose","firestoreConnect","firebaseConnect","isLoaded","Loading","profileStyle","Profile","props","dictToArray","dict","newArray","key","push","addInput","name","setState","state","slice","removeInput","index","inputs","editInput","value","assignSettings","school","updateSettings","settings","college_to_dorm","email_to_college","emails","filter","email","dorms","dorm","emailsDict","Object","keys","reduce","map","newSettings","alert","loading","height","InputList","onClick","i","length","Input","onChange","event","target","mapStateToProps","firestore","data","config","update","collection","doc","storeAs"],"mappings":"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","sourcesContent":["/** @jsx jsx */\n\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport Header from 'components/Header';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport {\n  firestoreConnect,\n  firebaseConnect,\n  isLoaded,\n} from 'react-redux-firebase';\n\nimport Loading from 'components/Loading';\n\nconst profileStyle = css`\n  p {\n    font-size: 18px;\n    font-family: Apercu;\n    font-weight: 500;\n    line-height: 22px;\n    letter-spacing: 0.05em;\n  }\n\n  .nodescription {\n    margin-bottom: 10px;\n  }\n\n  .description {\n    font-size: 16px;\n    font-family: Apercu-light;\n    margin-bottom: 10px;\n  }\n\n  .inputcontainer {\n    display: table;\n  }\n\n  .input {\n    width: 300px;\n    height: 40px;\n    background: #f4f2f2;\n    border: 0px;\n    margin-bottom: 5px;\n    margin-right: 10px;\n  }\n\n  .buttonsymbol {\n    line-height: 29px;\n  }\n\n  .roundbutton {\n    height: 35px;\n    width: 35px;\n    border: 3px solid #bd574e;\n    border-radius: 50%;\n    display: inline-block;\n    background: rgba(249, 198, 195, 0.8);\n    color: #bd574e;\n    text-align: center;\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .savechanges {\n    background: #bd574e;\n    color: #ffffff;\n    font-family: Apercu;\n    font-size: 18px;\n    width: 170px;\n    height: 38px;\n    letter-spacing: 0.05em;\n    align-items: center;\n    margin-top: 20px;\n  }\n\n  .checkmark {\n    margin-right: 4px;\n  }\n`;\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true };\n  }\n\n  componentDidUpdate() {\n    const { school, settings } = this.props;\n\n    if (isLoaded(settings) && this.state.loading) {\n      const { college_to_dorm, email_to_college } = settings;\n\n      this.setState({\n        dorms: college_to_dorm[school] || [],\n        emails:\n          Object.keys(email_to_college).filter(\n            email => email_to_college[email] === school,\n          ) || [],\n        loading: false,\n        settings,\n      });\n    }\n  }\n\n  dictToArray = dict => {\n    let newArray = [];\n    for (var key in dict) {\n      newArray.push(dict[key]);\n    }\n    return newArray;\n  };\n\n  addInput = name => {\n    // append empty string to end of array\n    this.setState({ [name]: [...this.state[name].slice(), ''] });\n  };\n\n  removeInput = (index, inputs, name) => {\n    delete inputs[index];\n    this.setState({ [name]: this.dictToArray(inputs) });\n  };\n\n  editInput = (index, value, inputs, name) => {\n    inputs[index] = value;\n    this.setState({ [name]: this.dictToArray(inputs) });\n  };\n\n  assignSettings = () => {\n    const { school, updateSettings } = this.props;\n    const { settings } = this.state;\n    const { college_to_dorm, email_to_college } = settings;\n\n    const emails = this.state.emails.filter(email => {\n      return email !== '';\n    });\n\n    const dorms = this.state.dorms.filter(dorm => {\n      return dorm !== '';\n    });\n\n    // reject this school's emails to override\n    let emailsDict = Object.keys(email_to_college).reduce((map, email) => {\n      if (email_to_college[email] !== school) {\n        map[email] = email_to_college[email];\n      }\n      return map;\n    }, {});\n\n    emailsDict = emails.reduce((map, email) => {\n      map[email] = school;\n      return map;\n    }, emailsDict);\n\n    let newSettings = {\n      ...settings,\n      college_to_dorm: {\n        ...college_to_dorm,\n        [school]: dorms,\n      },\n      email_to_college: emailsDict,\n    };\n\n    updateSettings(newSettings);\n    alert('Config saved!');\n  };\n\n  render() {\n    const { dorms, emails, loading } = this.state;\n\n    if (loading) {\n      return (\n        <div style={{ height: 200 }}>\n          <Loading />\n        </div>\n      );\n    }\n\n    return (\n      <div css={profileStyle}>\n        <Header>SCHOOL</Header>\n\n        <p className=\"nodescription\">Valid Email Suffix</p>\n        <InputList\n          addInput={this.addInput}\n          editInput={this.editInput}\n          inputs={emails}\n          name=\"emails\"\n          removeInput={this.removeInput}\n        />\n\n        <br />\n\n        <p>Dorms</p>\n        <div className=\"description\">Add your dorm names here!</div>\n        <InputList\n          addInput={this.addInput}\n          editInput={this.editInput}\n          inputs={dorms}\n          name=\"dorms\"\n          removeInput={this.removeInput}\n        />\n\n        <button className=\"savechanges\" onClick={this.assignSettings}>\n          <i className=\"fas fa-check checkmark\"></i>Save Changes\n        </button>\n      </div>\n    );\n  }\n}\n\nclass InputList extends Component {\n  onClick = () => {\n    const { addInput, name } = this.props;\n    addInput(name);\n  };\n\n  render() {\n    let { inputs } = this.props;\n\n    let dict = {};\n    for (var i = 0; i < inputs.length; i++) {\n      dict[i] = inputs[i];\n    }\n\n    return (\n      <div>\n        <div>\n          {Object.keys(dict).map(index => (\n            <Input index={index} inputs={dict} key={index} {...this.props} />\n          ))}\n        </div>\n        <div className=\"roundbutton\" onClick={this.onClick}>\n          <i className=\"fas fa-plus buttonsymbol\"></i>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Input extends Component {\n  onChange = event => {\n    const { editInput, index, inputs, name } = this.props;\n    editInput(index, event.target.value, inputs, name);\n  };\n\n  onClick = () => {\n    const { index, inputs, name, removeInput } = this.props;\n    removeInput(index, inputs, name);\n  };\n\n  render() {\n    const { index, inputs } = this.props;\n\n    return (\n      <div className=\"inputcontainer\">\n        <input\n          className=\"input\"\n          onChange={this.onChange}\n          type=\"text\"\n          value={inputs[index]}\n        />\n        <div className=\"roundbutton\" onClick={this.onClick}>\n          <i className=\"fas fa-minus buttonsymbol\"></i>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n    settings: state.firestore.data.config,\n    updateSettings: settings => {\n      props.firestore.update(\n        {\n          collection: 'settings',\n          doc: 'config',\n        },\n        settings,\n      );\n    },\n  };\n};\n\nexport default compose(\n  firebaseConnect(),\n  firestoreConnect(() => [\n    {\n      collection: 'settings',\n      doc: 'config',\n      storeAs: 'config',\n    },\n  ]),\n  connect(mapStateToProps),\n)(Profile);\n"]},"metadata":{},"sourceType":"module"}