{"ast":null,"code":"import _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/PageResults/routes/PageList.js\";\nimport React, { Component } from 'react';\nimport { isEmpty } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\nimport PageINPROGRESS from './PageINPROGRESS';\nimport Header from 'components/Header';\n\nvar PageList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageList, _Component);\n\n  function PageList(props) {\n    var _this;\n\n    _classCallCheck(this, PageList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PageList).call(this, props));\n\n    _this.fullNameSearch = function (search) {\n      return _this.props.firebase.ref('users').orderByChild('searchName').startAt(search).limitToFirst(10).once('value');\n    };\n\n    _this.lastNameSearch = function (search) {\n      return _this.props.firebase.ref('users').orderByChild('last').startAt(search).limitToFirst(10).once('value');\n    };\n\n    _this.handleKeyPress = function _callee(event) {\n      var searchResults, _this$state, first, last, formattedSearch, dataSnapshot, _dataSnapshot, searches;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(event.key === 'Enter' && _this.state.search)) {\n                _context.next = 16;\n                break;\n              }\n\n              _this.setState({\n                searching: true\n              });\n\n              searchResults = {};\n              _this$state = _this.state, first = _this$state.first, last = _this$state.last, formattedSearch = _this$state.search;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(_this.fullNameSearch(formattedSearch));\n\n            case 6:\n              dataSnapshot = _context.sent;\n              dataSnapshot.forEach(function (childSnapshot) {\n                var childValue = childSnapshot.val();\n                var childName = childValue.searchName.split(' ');\n                var childFirst = childName[0];\n                var childLast = childName[1] || '';\n\n                if (childFirst.includes(first) && childLast.includes(last)) {\n                  searchResults[childSnapshot.key] = childValue;\n                }\n              });\n\n              if (last) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(_this.lastNameSearch(formattedSearch));\n\n            case 11:\n              _dataSnapshot = _context.sent;\n\n              _dataSnapshot.forEach(function (childSnapshot) {\n                var childValue = childSnapshot.val();\n                var childLast = childValue.last || '';\n\n                if (childLast.includes(formattedSearch)) {\n                  searchResults[childSnapshot.key] = childValue;\n                }\n              });\n\n            case 13:\n              searches = Object.keys(searchResults).reduce(function (searches, key) {\n                if (key !== _this.props.uid) {\n                  return searches.concat(searchResults[key]);\n                }\n\n                return searches;\n              }, []);\n              searches.sort(function (a, b) {\n                return a.searchName.localeCompare(b.searchName);\n              });\n\n              _this.setState({\n                searches: searches\n              });\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var value = event.target.value.trim();\n\n      if (value === '') {\n        _this.setState({\n          search: '',\n          searching: false\n        });\n\n        return;\n      }\n\n      var name = value.split(' ');\n      var first = name[0].toLowerCase();\n      var last = name.length > 1 ? name[name.length - 1].toLowerCase() : '';\n      var search = last ? first + ' ' + last : first;\n\n      _this.setState({\n        first: first,\n        last: last,\n        search: search\n      });\n    };\n\n    _this.renderMessage = function () {\n      if (_this.props.status === 'live-survey') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"Your matches come out on \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \"Friday, September 20\"), \"! Make sure to finalize \", React.createElement(Link, {\n          to: \"/app/survey\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"your survey!\")), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }), React.createElement(PageINPROGRESS, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }));\n      } else if (_this.props.status === 'live-processing') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, \"We're calculating matches now! Hang tight!\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), React.createElement(PageINPROGRESS, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"Survey and matches are officially closed! If you have no matches, it looks like you didn't fill out the survey fully :(\");\n      }\n    };\n\n    _this.renderSearch = function () {\n      return React.createElement(\"input\", {\n        id: \"search\",\n        onChange: _this.handleInputChange,\n        onKeyPress: _this.handleKeyPress,\n        placeholder: \"Hate your matches? Search more people here\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      });\n    };\n\n    _this.state = {\n      search: '',\n      searches: [],\n      searching: false\n    };\n    return _this;\n  }\n\n  _createClass(PageList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (isEmpty(this.props.matches) || this.props.status !== 'live-matches' && this.props.status !== 'development') {\n        return React.createElement(\"div\", {\n          className: \"PageList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, \"RESULTS\"), this.renderSearch(), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }), this.renderMessage());\n      }\n\n      if (this.state.searching) {\n        return React.createElement(\"div\", {\n          className: \"PageList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, \"RESULTS\"), this.renderSearch(), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }), Object.keys(this.state.searches).map(function (userId) {\n          var user = _this2.state.searches[userId];\n\n          if (!user.name) {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 158\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(\"div\", {\n            key: userId,\n            style: {\n              display: 'flex',\n              marginBottom: 30,\n              maxWidth: 600,\n              position: 'relative'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 162\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            alt: \"profile\",\n            src: user.profile_pic || require('assets/empty.png'),\n            style: {\n              width: 125,\n              height: 125,\n              objectFit: 'cover',\n              minWidth: 125,\n              background: \"url(\".concat(require('assets/loading.svg'), \")\"),\n              backgroundSize: 'contain',\n              backgroundRepeat: 'no-repeat',\n              backgroundPosition: 'center'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: \"info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"basics\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186\n            },\n            __self: this\n          }, user.year.toUpperCase() + ', ' + user.dorm.toUpperCase(), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: \"name\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189\n            },\n            __self: this\n          }, user.name)), React.createElement(\"div\", {\n            className: \"description\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, user.description), React.createElement(\"button\", {\n            id: \"match\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192\n            },\n            __self: this\n          }, \"MATCH\")), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            },\n            __self: this\n          }));\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"PageList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"RESULTS\"), this.renderSearch(), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), Object.keys(this.props.matches).map(function (match_id) {\n        //console.log(this.props.matches)\n        var match = _this2.props.matches[match_id];\n        var user = match.user1.id === _this2.props.uid ? match.user2 : match.user1;\n\n        if (!user.name) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 216\n            },\n            __self: this\n          });\n        }\n\n        return React.createElement(\"div\", {\n          key: match_id,\n          style: {\n            display: 'flex',\n            marginBottom: 30,\n            maxWidth: 600,\n            position: 'relative'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, match[_this2.props.uid] && React.createElement(\"div\", {\n          style: {\n            position: 'absolute',\n            top: -10,\n            left: 112,\n            width: 25,\n            height: 25,\n            background: '#EC4E55',\n            borderRadius: '50%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }), React.createElement(\"img\", {\n          alt: \"profile\",\n          src: user.profile_pic || require('assets/empty.png'),\n          style: {\n            width: 125,\n            height: 125,\n            objectFit: 'cover',\n            minWidth: 125,\n            background: \"url(\".concat(require('assets/loading.svg'), \")\"),\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"basics\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, user.year.toUpperCase() + ', ' + user.dorm.toUpperCase(), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, user.name)), React.createElement(\"div\", {\n          className: \"description\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, user.description), React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this2.props.history.push('/app/results/' + match_id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, \"SCHEDULE FREE DATE\")), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }));\n      }));\n    }\n  }]);\n\n  return PageList;\n}(Component);\n\nexport { PageList as default };","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/PageResults/routes/PageList.js"],"names":["React","Component","isEmpty","Link","PageINPROGRESS","Header","PageList","props","fullNameSearch","search","firebase","ref","orderByChild","startAt","limitToFirst","once","lastNameSearch","handleKeyPress","event","key","state","setState","searching","searchResults","first","last","formattedSearch","dataSnapshot","forEach","childSnapshot","childValue","val","childName","searchName","split","childFirst","childLast","includes","searches","Object","keys","reduce","uid","concat","sort","a","b","localeCompare","handleInputChange","value","target","trim","name","toLowerCase","length","renderMessage","status","renderSearch","matches","map","userId","user","display","marginBottom","maxWidth","position","profile_pic","require","width","height","objectFit","minWidth","background","backgroundSize","backgroundRepeat","backgroundPosition","year","toUpperCase","dorm","description","match_id","match","user1","id","user2","top","left","borderRadius","history","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { isEmpty } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\nimport PageINPROGRESS from './PageINPROGRESS';\nimport Header from 'components/Header';\n\nexport default class PageList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: '',\n      searches: [],\n      searching: false,\n    };\n  }\n\n  fullNameSearch = search =>\n    this.props.firebase\n      .ref('users')\n      .orderByChild('searchName')\n      .startAt(search)\n      .limitToFirst(10)\n      .once('value');\n\n  lastNameSearch = search =>\n    this.props.firebase\n      .ref('users')\n      .orderByChild('last')\n      .startAt(search)\n      .limitToFirst(10)\n      .once('value');\n\n  handleKeyPress = async event => {\n    if (event.key === 'Enter' && this.state.search) {\n      this.setState({ searching: true });\n\n      let searchResults = {};\n      const { first, last, search: formattedSearch } = this.state;\n\n      const dataSnapshot = await this.fullNameSearch(formattedSearch);\n\n      dataSnapshot.forEach(childSnapshot => {\n        const childValue = childSnapshot.val();\n        const childName = childValue.searchName.split(' ');\n        const childFirst = childName[0];\n        const childLast = childName[1] || '';\n\n        if (childFirst.includes(first) && childLast.includes(last)) {\n          searchResults[childSnapshot.key] = childValue;\n        }\n      });\n\n      if (!last) {\n        const dataSnapshot = await this.lastNameSearch(formattedSearch);\n        dataSnapshot.forEach(childSnapshot => {\n          const childValue = childSnapshot.val();\n          const childLast = childValue.last || '';\n          if (childLast.includes(formattedSearch)) {\n            searchResults[childSnapshot.key] = childValue;\n          }\n        });\n      }\n\n      const searches = Object.keys(searchResults).reduce((searches, key) => {\n        if (key !== this.props.uid) {\n          return searches.concat(searchResults[key]);\n        }\n        return searches;\n      }, []);\n\n      searches.sort((a, b) => a.searchName.localeCompare(b.searchName));\n      this.setState({ searches: searches });\n    }\n  };\n\n  handleInputChange = event => {\n    const value = event.target.value.trim();\n\n    if (value === '') {\n      this.setState({ search: '', searching: false });\n      return;\n    }\n\n    const name = value.split(' ');\n    const first = name[0].toLowerCase();\n    const last = name.length > 1 ? name[name.length - 1].toLowerCase() : '';\n    const search = last ? first + ' ' + last : first;\n\n    this.setState({ first, last, search });\n  };\n\n  renderMessage = () => {\n    if (this.props.status === 'live-survey') {\n      return (\n        <div>\n          <div>\n            Your matches come out on <b>Friday, September 20</b>! Make sure to\n            finalize <Link to=\"/app/survey\">your survey!</Link>\n          </div>\n          <br />\n          <PageINPROGRESS />\n        </div>\n      );\n    } else if (this.props.status === 'live-processing') {\n      return (\n        <div>\n          <div>We're calculating matches now! Hang tight!</div>\n          <br />\n          <PageINPROGRESS />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Survey and matches are officially closed! If you have no matches, it\n          looks like you didn't fill out the survey fully :(\n        </div>\n      );\n    }\n  };\n\n  renderSearch = () => (\n    <input\n      id=\"search\"\n      onChange={this.handleInputChange}\n      onKeyPress={this.handleKeyPress}\n      placeholder=\"Hate your matches? Search more people here\"\n      type=\"text\"\n    ></input>\n  );\n\n  render() {\n    if (\n      isEmpty(this.props.matches) ||\n      (this.props.status !== 'live-matches' &&\n        this.props.status !== 'development')\n    ) {\n      return (\n        <div className=\"PageList\">\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n          {this.renderMessage()}\n        </div>\n      );\n    }\n\n    if (this.state.searching) {\n      return (\n        <div className=\"PageList\">\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n\n          {Object.keys(this.state.searches).map(userId => {\n            const user = this.state.searches[userId];\n            if (!user.name) {\n              return <div />;\n            }\n\n            return (\n              <div\n                key={userId}\n                style={{\n                  display: 'flex',\n                  marginBottom: 30,\n                  maxWidth: 600,\n                  position: 'relative',\n                }}\n              >\n                <img\n                  alt=\"profile\"\n                  src={user.profile_pic || require('assets/empty.png')}\n                  style={{\n                    width: 125,\n                    height: 125,\n                    objectFit: 'cover',\n                    minWidth: 125,\n                    background: `url(${require('assets/loading.svg')})`,\n                    backgroundSize: 'contain',\n                    backgroundRepeat: 'no-repeat',\n                    backgroundPosition: 'center',\n                  }}\n                />\n                <div className=\"info\">\n                  <div className=\"basics\">\n                    {user.year.toUpperCase() + ', ' + user.dorm.toUpperCase()}\n                    <br />\n                    <div className=\"name\">{user.name}</div>\n                  </div>\n                  <div className=\"description\">{user.description}</div>\n                  <button id=\"match\">MATCH</button>\n                </div>\n                <br />\n                <br />\n              </div>\n            );\n          })}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"PageList\">\n        <Header>RESULTS</Header>\n        {this.renderSearch()}\n        <br />\n\n        {Object.keys(this.props.matches).map(match_id => {\n          //console.log(this.props.matches)\n          let match = this.props.matches[match_id];\n          let user =\n            match.user1.id === this.props.uid ? match.user2 : match.user1;\n\n          if (!user.name) {\n            return <div />;\n          }\n\n          return (\n            <div\n              key={match_id}\n              style={{\n                display: 'flex',\n                marginBottom: 30,\n                maxWidth: 600,\n                position: 'relative',\n              }}\n            >\n              {match[this.props.uid] && (\n                <div\n                  style={{\n                    position: 'absolute',\n                    top: -10,\n                    left: 112,\n                    width: 25,\n                    height: 25,\n                    background: '#EC4E55',\n                    borderRadius: '50%',\n                  }}\n                />\n              )}\n              <img\n                alt=\"profile\"\n                src={user.profile_pic || require('assets/empty.png')}\n                style={{\n                  width: 125,\n                  height: 125,\n                  objectFit: 'cover',\n                  minWidth: 125,\n                  background: `url(${require('assets/loading.svg')})`,\n                  backgroundSize: 'contain',\n                  backgroundRepeat: 'no-repeat',\n                  backgroundPosition: 'center',\n                }}\n              />\n              <div className=\"info\">\n                <div className=\"basics\">\n                  {user.year.toUpperCase() + ', ' + user.dorm.toUpperCase()}\n                  <br />\n                  <div className=\"name\">{user.name}</div>\n                  {/* <div className=\"icons\">\n                    <Link\n                      id=\"facebook\"\n                      to={this.props.to ? this.props.to : '/'}\n                    >\n                      <img\n                        src={require('assets/facebook.png')}\n                        style={{ width: '31px', height: '31px' }}\n                      />\n                    </Link>\n                    <Link id=\"spotify\" to={this.props.to ? this.props.to : '/'}>\n                      <img\n                        src={require('assets/spotify.png')}\n                        style={{ width: '35px', height: '35px' }}\n                      />\n                    </Link>\n                  </div> */}\n                </div>\n                <div className=\"description\">{user.description}</div>\n\n                <button\n                  onClick={() =>\n                    this.props.history.push('/app/results/' + match_id)\n                  }\n                >\n                  SCHEDULE FREE DATE\n                </button>\n              </div>\n              <br />\n              <br />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}