{"ast":null,"code":"import _objectSpread from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/PageProfile.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  .profile-container {\\n    margin-top: 10px;\\n  }\\n\\n  .profile-pic {\\n    float: left;\\n    margin-right: 10px;\\n  }\\n\\n  .profile-input {\\n    text-align: left;\\n    width: 300px;\\n    height: 43px;\\n    margin-bottom: 9px;\\n    color: #545353;\\n    background: #f4f2f2;\\n    border: 0px;\\n  }\\n\\n  .profile-select {\\n    background: #f4f2f2;\\n    background-image: url(https://image.flaticon.com/icons/svg/60/60781.svg);\\n    background-position: 95% 50%;\\n    background-repeat: no-repeat;\\n    background-size: 16px;\\n    border: 0px;\\n    width: 300px;\\n    height: 43px;\\n    margin-bottom: 9px;\\n    color: #545353;\\n  }\\n\\n  .bottom-elements {\\n    margin-bottom: 20px;\\n  }\\n\\n  .question-header {\\n    font-family: Apercu;\\n    letter-spacing: 0.05em;\\n  }\\n\\n  .profile-text-area {\\n    text-align: left;\\n    width: 300px;\\n    height: 75px;\\n    color: #545353;\\n    background: #f4f2f2;\\n    border: 0px;\\n  }\\n\\n  .text-area-container {\\n    display: inline-block;\\n  }\\n\\n  .save-button {\\n    margin-left: 210px;\\n    width: 300px;\\n  }\\n\\n  .incomplete-message {\\n    margin-top: 5px;\\n    margin-left: 210px;\\n    color: red;\\n  }\\n\\n  .react-toggle--checked .react-toggle-track {\\n    background-color: #bd574e;\\n  }\\n\\n  .react-toggle--checked:hover:not(.react-toggle--disabled)\\n    .react-toggle-track {\\n    background-color: #6c2c2c;\\n  }\\n\\n  .react-toggle--checked .react-toggle-thumb {\\n    border-color: #bd574e;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport { jsx, css } from '@emotion/core';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport Toggle from 'react-toggle';\nimport 'react-toggle/style.css';\nimport Checkboxes from 'components/Checkboxes';\nimport Header from 'components/Header';\nimport Input from 'components/Input';\nimport PicUpload from 'components/PicUpload';\nimport Radios from 'components/Radios';\nimport Select from 'components/Select';\nimport Textarea from 'components/Textarea';\nvar pageProfileLayoutStyle = css(_templateObject());\n\nvar PageProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageProfile, _Component);\n\n  function PageProfile(props) {\n    var _this;\n\n    _classCallCheck(this, PageProfile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PageProfile).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      console.log(value);\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSelectArrayAsObject = function (event) {\n      var _event$target2 = event.target,\n          name = _event$target2.name,\n          value = _event$target2.value;\n      var selected = {};\n      Object.forEach(value, function (elt) {\n        return selected[elt] = true;\n      });\n\n      _this.setState(_defineProperty({}, name, selected));\n    };\n\n    _this.handleCheckboxChange = function (name, response) {\n      var values = _this.state[name];\n      var bool = values ? !values[response] : true;\n\n      var newValues = _objectSpread({}, values, _defineProperty({}, response, bool));\n\n      console.log(newValues);\n\n      _this.setState(_defineProperty({}, name, newValues));\n    };\n\n    _this.handleRadioChange = function (name, response) {\n      _this.setState(_defineProperty({}, name, response));\n    };\n\n    _this.handleToggleChange = function () {\n      _this.setState({\n        show: !_this.state.show\n      });\n    };\n\n    _this.checkRequired = function () {\n      var required = ['dorm', 'gender', 'matchType', 'name', 'year'];\n      var completed = required.every(function (requirement) {\n        return _this.state[requirement];\n      });\n      var lookingForGender = _this.state.lookingForGender;\n\n      var _ref = lookingForGender || {},\n          Male = _ref.Male,\n          Female = _ref.Female,\n          Nonbinary = _ref.Nonbinary;\n\n      var lookingFor = _this.state.lookingFor || {}; // Using bracket notation as 'true love' is not a valid identifier\n\n      var truelove = lookingFor['true love'];\n      var bestie = lookingFor['bestie'];\n      completed = completed && (Male || Female || Nonbinary) && (truelove || bestie);\n      return completed;\n    };\n\n    _this.checkChanged = function () {\n      var profile = _this.props.profile;\n\n      var _ref2 = _this.state.lookingForGender || {},\n          Male = _ref2.Male,\n          Female = _ref2.Female,\n          Nonbinary = _ref2.Nonbinary;\n\n      var lookingForGender = profile.lookingForGender || {};\n      var lookingFor = profile.lookingFor || {};\n      var lookingForState = _this.state.lookingFor || {};\n      var harvardMIT = profile.harvardMIT || false;\n      var Yes = _this.state.harvardMIT.Yes; // Using bracket notation as 'true love' is not a valid identifier\n\n      var truelove = lookingForState['true love'];\n      var bestie = lookingForState['bestie'];\n      var needCheck = ['description', 'dorm', 'gender', 'matchType', 'name', 'show', 'year'];\n      var same = needCheck.every(function (input) {\n        return _this.state[input] === profile[input];\n      }); // ^ is XOR. We need it to deal with undefined === false cases.\n\n      same = same && !(Male ^ lookingForGender['Male']) && !(Female ^ lookingForGender['Female']) && !(Nonbinary ^ lookingForGender['Nonbinary']) && !(truelove ^ lookingFor['true love']) && !(bestie ^ lookingFor['bestie']) && harvardMIT === Yes;\n      return same;\n    };\n\n    _this.saveProfile = function () {\n      if (_this.checkRequired()) {\n        var _this$props = _this.props,\n            college = _this$props.college,\n            updateProfile = _this$props.updateProfile;\n\n        var lowerCaseName = _this.state.name.toLowerCase();\n\n        var _this$state = _this.state,\n            harvardMIT = _this$state.harvardMIT,\n            show = _this$state.show;\n        updateProfile(_objectSpread({}, _this.state, {\n          harvardMIT: college === 'Harvard' || college === 'MIT' ? harvardMIT && harvardMIT.Yes : null,\n          last: show ? lowerCaseName.split(' ').slice(-1)[0] : null,\n          searchName: show ? lowerCaseName : null\n        }));\n        alert('Info saved!');\n      }\n    };\n\n    _this.parseObjectAsArray = function (obj) {\n      var filteredArr = Object.keys(obj).filter(function (key) {\n        return obj[key];\n      });\n      return filteredArr;\n    };\n\n    var _props$profile = props.profile,\n        description = _props$profile.description,\n        dorm = _props$profile.dorm,\n        email = _props$profile.email,\n        gender = _props$profile.gender,\n        _lookingFor = _props$profile.lookingFor,\n        _lookingForGender = _props$profile.lookingForGender,\n        matchType = _props$profile.matchType,\n        _name = _props$profile.name,\n        _show = _props$profile.show,\n        year = _props$profile.year;\n\n    var _harvardMIT;\n\n    if (props.profile.harvardMIT) {\n      _harvardMIT = {\n        Yes: true\n      };\n    } else {\n      _harvardMIT = {\n        Yes: false\n      };\n    }\n\n    _this.state = {\n      description: description,\n      dorm: dorm,\n      email: email,\n      gender: gender,\n      harvardMIT: _harvardMIT,\n      lookingFor: _lookingFor,\n      lookingForGender: _lookingForGender,\n      matchType: matchType,\n      name: _name,\n      show: _show,\n      year: year\n    };\n    return _this;\n  }\n\n  _createClass(PageProfile, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          college = _this$props2.college,\n          email = _this$props2.email,\n          profile_pic = _this$props2.profile_pic,\n          updateProfile = _this$props2.updateProfile;\n      var filled = this.checkRequired();\n      var changed = this.checkChanged();\n      return jsx(\"div\", {\n        className: \"PageProfile\",\n        css: pageProfileLayoutStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, jsx(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"PROFILE\"), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }), jsx(\"div\", {\n        className: \"profile-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"profile-pic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, jsx(PicUpload, {\n        name: email,\n        original_pic: profile_pic,\n        path: \"/profile_pics\",\n        size: 200,\n        updateURL: updateProfile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      })), jsx(Input, {\n        className: \"profile-input\",\n        handleInputChange: this.handleInputChange,\n        name: \"name\",\n        placeholder: \"Your name\",\n        type: \"text\",\n        value: this.state.name || '',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), jsx(Select, {\n        className: \"profile-select\",\n        handleInputChange: this.handleInputChange,\n        name: \"dorm\",\n        placeholder: \"Dorm\",\n        value: this.state.dorm,\n        values: this.props.dorms,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }), jsx(Select, {\n        className: \"profile-select\",\n        handleInputChange: this.handleInputChange,\n        name: \"year\",\n        placeholder: \"Year\",\n        value: this.state.year,\n        values: ['First Year', 'Sophomore', 'Junior', 'Senior', 'Grad student'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }), jsx(\"div\", {\n        className: \"text-area-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, jsx(Textarea, {\n        className: \"profile-text-area\",\n        handleInputChange: this.handleInputChange,\n        name: \"description\",\n        placeholder: \"Write a bit about yourself!\",\n        rows: 2,\n        type: \"text\",\n        value: this.state.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      })), jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"WHAT DO YOU WANT? (BE HONEST.)\"), \"I'm looking for\", jsx(Select, {\n        className: \"profile-select\",\n        handleInputChange: this.handleSelectArrayAsObject,\n        name: \"lookingFor\",\n        placeholder: \"Select\",\n        value: this.parseObjectAsArray(this.state.lookingFor),\n        labels: ['love', 'friendship', 'anything, really'],\n        values: [['true love'], ['friendship'], ['true love', 'friendship']],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), \"with someone who is\", jsx(Select, {\n        className: \"profile-select\",\n        handleInputChange: this.handleInputChange,\n        name: \"matchType\",\n        placeholder: \"Select\",\n        value: this.state.matchType,\n        labels: ['similar to me', 'different from me'],\n        values: ['similar', 'different'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      })), jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, \"GENDER PREFERENCES\"), \"I identify as\", jsx(Select, {\n        className: \"profile-select\",\n        handleInputChange: this.handleInputChange,\n        name: \"gender\",\n        placeholder: \"Select\",\n        value: this.state.gender,\n        labels: ['male', 'female', 'nonbinary'],\n        values: ['Male', 'Female', 'Nonbinary'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }), \"and I want to be matched with\", jsx(Select, {\n        className: \"profile-select\",\n        handleInputChange: this.handleSelectArrayAsObject,\n        name: \"lookingForGender\",\n        placeholder: \"Select\",\n        value: this.parseObjectAsArray(this.state.lookingForGender),\n        labels: ['males', 'females', 'nonbinary people', 'males & females', 'males & nonbinary people', 'females & nonbinary people', 'people of any gender'],\n        values: [['Male'], ['Female'], ['Nonbinary'], ['Male', 'Female'], ['Male', 'Nonbinary'], ['Female', 'Nonbinary'], ['Male', 'Female', 'Nonbinary']],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      })), jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \"GENDER PREFERENCES\"), jsx(Radios, {\n        handleClick: this.handleRadioChange,\n        labels: ['I identify as male', 'I identify as female', 'I identify as nonbinary'],\n        name: \"gender\",\n        responses: ['Male', 'Female', 'Nonbinary'],\n        value: this.state.gender,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      })), jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"GENDER PREFERENCES\"), jsx(Checkboxes, {\n        handleClick: this.handleCheckboxChange,\n        labels: ['I want to be matched with males', 'I want to be matched with females', 'I want to be match with nonbinary people'],\n        name: \"lookingForGender\",\n        responses: ['Male', 'Female', 'Nonbinary'],\n        values: this.state.lookingForGender,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      })), jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }, \"SIMILAR OR DIFFERENT\"), jsx(Radios, {\n        handleClick: this.handleRadioChange,\n        labels: ['I want to be matched with similar people to me', 'I want to be matched with different people to me'],\n        name: \"matchType\",\n        responses: ['similar', 'different'],\n        value: this.state.matchType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      })), (college === 'Harvard' || college === 'MIT') && jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, \"HARVARD-MIT MATCHES\"), jsx(Checkboxes, {\n        handleClick: this.handleCheckboxChange,\n        labels: ['I want to opt in to cross Harvard-MIT matches!'],\n        name: \"harvardMIT\",\n        responses: ['Yes'],\n        values: this.state.harvardMIT,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      })), jsx(\"div\", {\n        className: \"bottom-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"question-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, \"SHOW IN SEARCH\"), jsx(Toggle, {\n        defaultChecked: this.state.show,\n        onChange: this.handleToggleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }))), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }), jsx(\"div\", {\n        className: \"save-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437\n        },\n        __self: this\n      }, jsx(\"button\", {\n        onClick: this.saveProfile,\n        style: {\n          opacity: filled ? 1 : 0.8,\n          margin: '0 auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, \"Save Changes\")), !filled && jsx(\"div\", {\n        className: \"incomplete-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }, \"Please fully complete profile before saving.\"), !changed && jsx(\"div\", {\n        className: \"incomplete-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      }, \"You have unsaved changes.\")));\n    }\n  }]);\n\n  return PageProfile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    email: state.firebase.auth.email,\n    profile: state.firebase.profile,\n    profile_pic: state.firebase.profile.profile_pic,\n    updateProfile: props.firebase.updateProfile\n  };\n};\n\nexport default compose(firebaseConnect(), connect(mapStateToProps))(PageProfile);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/PageProfile.js"],"names":["jsx","css","Component","connect","compose","firebaseConnect","Toggle","Checkboxes","Header","Input","PicUpload","Radios","Select","Textarea","pageProfileLayoutStyle","PageProfile","props","handleInputChange","event","target","name","value","console","log","setState","handleSelectArrayAsObject","selected","Object","forEach","elt","handleCheckboxChange","response","values","state","bool","newValues","handleRadioChange","handleToggleChange","show","checkRequired","required","completed","every","requirement","lookingForGender","Male","Female","Nonbinary","lookingFor","truelove","bestie","checkChanged","profile","lookingForState","harvardMIT","Yes","needCheck","same","input","saveProfile","college","updateProfile","lowerCaseName","toLowerCase","last","split","slice","searchName","alert","parseObjectAsArray","obj","filteredArr","keys","filter","key","description","dorm","email","gender","matchType","year","profile_pic","filled","changed","dorms","opacity","margin","mapStateToProps","firebase","auth"],"mappings":"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","sourcesContent":["/** @jsx jsx */\n\nimport { jsx, css } from '@emotion/core';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport Toggle from 'react-toggle';\nimport 'react-toggle/style.css';\n\nimport Checkboxes from 'components/Checkboxes';\nimport Header from 'components/Header';\nimport Input from 'components/Input';\nimport PicUpload from 'components/PicUpload';\nimport Radios from 'components/Radios';\nimport Select from 'components/Select';\nimport Textarea from 'components/Textarea';\n\nconst pageProfileLayoutStyle = css`\n  .profile-container {\n    margin-top: 10px;\n  }\n\n  .profile-pic {\n    float: left;\n    margin-right: 10px;\n  }\n\n  .profile-input {\n    text-align: left;\n    width: 300px;\n    height: 43px;\n    margin-bottom: 9px;\n    color: #545353;\n    background: #f4f2f2;\n    border: 0px;\n  }\n\n  .profile-select {\n    background: #f4f2f2;\n    background-image: url(https://image.flaticon.com/icons/svg/60/60781.svg);\n    background-position: 95% 50%;\n    background-repeat: no-repeat;\n    background-size: 16px;\n    border: 0px;\n    width: 300px;\n    height: 43px;\n    margin-bottom: 9px;\n    color: #545353;\n  }\n\n  .bottom-elements {\n    margin-bottom: 20px;\n  }\n\n  .question-header {\n    font-family: Apercu;\n    letter-spacing: 0.05em;\n  }\n\n  .profile-text-area {\n    text-align: left;\n    width: 300px;\n    height: 75px;\n    color: #545353;\n    background: #f4f2f2;\n    border: 0px;\n  }\n\n  .text-area-container {\n    display: inline-block;\n  }\n\n  .save-button {\n    margin-left: 210px;\n    width: 300px;\n  }\n\n  .incomplete-message {\n    margin-top: 5px;\n    margin-left: 210px;\n    color: red;\n  }\n\n  .react-toggle--checked .react-toggle-track {\n    background-color: #bd574e;\n  }\n\n  .react-toggle--checked:hover:not(.react-toggle--disabled)\n    .react-toggle-track {\n    background-color: #6c2c2c;\n  }\n\n  .react-toggle--checked .react-toggle-thumb {\n    border-color: #bd574e;\n  }\n`;\n\nclass PageProfile extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      description,\n      dorm,\n      email,\n      gender,\n      lookingFor,\n      lookingForGender,\n      matchType,\n      name,\n      show,\n      year,\n    } = props.profile;\n\n    let harvardMIT;\n    if (props.profile.harvardMIT) {\n      harvardMIT = { Yes: true };\n    } else {\n      harvardMIT = { Yes: false };\n    }\n\n    this.state = {\n      description,\n      dorm,\n      email,\n      gender,\n      harvardMIT,\n      lookingFor,\n      lookingForGender,\n      matchType,\n      name,\n      show,\n      year,\n    };\n  }\n\n  handleInputChange = event => {\n    const { name, value } = event.target;\n    console.log(value)\n    this.setState({ [name]: value });\n  };\n\n  handleSelectArrayAsObject = event => {\n    const { name, value } = event.target;\n    const selected = {};\n    Object.forEach(value, elt => selected[elt] = true)\n    this.setState({ [name]: selected });\n  }\n\n  handleCheckboxChange = (name, response) => {\n    const values = this.state[name];\n    const bool = values ? !values[response] : true;\n    const newValues = {\n      ...values,\n      [response]: bool,\n    };\n    console.log(newValues)\n    this.setState({ [name]: newValues });\n  };\n\n  handleRadioChange = (name, response) => {\n    this.setState({ [name]: response });\n  };\n\n  handleToggleChange = () => {\n    this.setState({ show: !this.state.show });\n  };\n\n  checkRequired = () => {\n    const required = ['dorm', 'gender', 'matchType', 'name', 'year'];\n\n    let completed = required.every(requirement => this.state[requirement]);\n\n    const { lookingForGender } = this.state;\n    const { Male, Female, Nonbinary } = lookingForGender || {};\n    const lookingFor = this.state.lookingFor || {};\n\n    // Using bracket notation as 'true love' is not a valid identifier\n    const truelove = lookingFor['true love'];\n    const bestie = lookingFor['bestie'];\n\n    completed =\n      completed && (Male || Female || Nonbinary) && (truelove || bestie);\n\n    return completed;\n  };\n\n  checkChanged = () => {\n    const { profile } = this.props;\n    const { Male, Female, Nonbinary } = this.state.lookingForGender || {};\n    const lookingForGender = profile.lookingForGender || {};\n    const lookingFor = profile.lookingFor || {};\n    const lookingForState = this.state.lookingFor || {};\n\n    const harvardMIT = profile.harvardMIT || false;\n    const { Yes } = this.state.harvardMIT;\n\n    // Using bracket notation as 'true love' is not a valid identifier\n    const truelove = lookingForState['true love'];\n    const bestie = lookingForState['bestie'];\n\n    const needCheck = [\n      'description',\n      'dorm',\n      'gender',\n      'matchType',\n      'name',\n      'show',\n      'year',\n    ];\n\n    let same = needCheck.every(input => this.state[input] === profile[input]);\n\n    // ^ is XOR. We need it to deal with undefined === false cases.\n    same =\n      same &&\n      !(Male ^ lookingForGender['Male']) &&\n      !(Female ^ lookingForGender['Female']) &&\n      !(Nonbinary ^ lookingForGender['Nonbinary']) &&\n      !(truelove ^ lookingFor['true love']) &&\n      !(bestie ^ lookingFor['bestie']) &&\n      harvardMIT === Yes;\n\n    return same;\n  };\n\n  saveProfile = () => {\n    if (this.checkRequired()) {\n      const { college, updateProfile } = this.props;\n      const lowerCaseName = this.state.name.toLowerCase();\n      const { harvardMIT, show } = this.state;\n\n      updateProfile({\n        ...this.state,\n        harvardMIT:\n          college === 'Harvard' || college === 'MIT'\n            ? harvardMIT && harvardMIT.Yes\n            : null,\n        last: show ? lowerCaseName.split(' ').slice(-1)[0] : null,\n        searchName: show ? lowerCaseName : null,\n      });\n      alert('Info saved!');\n    }\n  };\n\n  // Parses object like {'true love': true, 'bestie': false} as ['true love']\n  parseObjectAsArray = obj => {\n    const filteredArr = Object.keys(obj).filter( key => obj[key] );\n    return filteredArr\n  }\n\n  render() {\n    const { college, email, profile_pic, updateProfile } = this.props;\n\n    var filled = this.checkRequired();\n    var changed = this.checkChanged();\n    return (\n      <div className=\"PageProfile\" css={pageProfileLayoutStyle}>\n        <Header>PROFILE</Header>\n        <br />\n        <div className=\"profile-container\">\n          <div>\n            <div className=\"profile-pic\">\n              <PicUpload\n                name={email}\n                original_pic={profile_pic}\n                path=\"/profile_pics\"\n                size={200}\n                updateURL={updateProfile}\n              />\n            </div>\n            <Input\n              className=\"profile-input\"\n              handleInputChange={this.handleInputChange}\n              name=\"name\"\n              placeholder=\"Your name\"\n              type=\"text\"\n              value={this.state.name || ''}\n            />\n            <Select\n              className=\"profile-select\"\n              handleInputChange={this.handleInputChange}\n              name=\"dorm\"\n              placeholder=\"Dorm\"\n              value={this.state.dorm}\n              values={this.props.dorms}\n            />\n            <Select\n              className=\"profile-select\"\n              handleInputChange={this.handleInputChange}\n              name=\"year\"\n              placeholder=\"Year\"\n              value={this.state.year}\n              values={[\n                'First Year',\n                'Sophomore',\n                'Junior',\n                'Senior',\n                'Grad student',\n              ]}\n            />\n            <div className=\"text-area-container\">\n              <Textarea\n                className=\"profile-text-area\"\n                handleInputChange={this.handleInputChange}\n                name=\"description\"\n                placeholder=\"Write a bit about yourself!\"\n                rows={2}\n                type=\"text\"\n                value={this.state.description}\n              />\n            </div>\n            <div className=\"bottom-elements\">\n              <div className=\"question-header\">WHAT DO YOU WANT? (BE HONEST.)</div>\n              I'm looking for\n              <Select\n                className=\"profile-select\"\n                handleInputChange={this.handleSelectArrayAsObject}\n                name=\"lookingFor\"\n                placeholder=\"Select\"\n                value={this.parseObjectAsArray(this.state.lookingFor)}\n                labels={['love', 'friendship', 'anything, really', ]}\n                values={[['true love'], ['friendship'], ['true love','friendship'], ]}\n              />\n              with someone who is\n              <Select\n                className=\"profile-select\"\n                handleInputChange={this.handleInputChange}\n                name=\"matchType\"\n                placeholder=\"Select\"\n                value={this.state.matchType}\n                labels={['similar to me', 'different from me', ]}\n                values={[ 'similar', 'different', ]}\n              />\n            </div>\n            <div className=\"bottom-elements\">\n              <div className=\"question-header\">GENDER PREFERENCES</div>\n              I identify as\n              <Select\n                className=\"profile-select\"\n                handleInputChange={this.handleInputChange}\n                name=\"gender\"\n                placeholder=\"Select\"\n                value={this.state.gender}\n                labels={['male','female','nonbinary',]}\n                values={['Male','Female','Nonbinary',]}\n              />\n              and I want to be matched with\n              <Select\n                className=\"profile-select\"\n                handleInputChange={this.handleSelectArrayAsObject}\n                name=\"lookingForGender\"\n                placeholder=\"Select\"\n                value={this.parseObjectAsArray(this.state.lookingForGender)}\n                labels={[\n                  'males',\n                  'females',\n                  'nonbinary people',\n                  'males & females',\n                  'males & nonbinary people',\n                  'females & nonbinary people',\n                  'people of any gender'\n                ]}\n                values={[\n                  ['Male'],\n                  ['Female'],\n                  ['Nonbinary'],\n                  ['Male', 'Female'],\n                  ['Male', 'Nonbinary'],\n                  ['Female', 'Nonbinary'],\n                  ['Male','Female', 'Nonbinary'],\n                ]}\n              />\n            </div>\n            <div className=\"bottom-elements\">\n              <div className=\"question-header\">GENDER PREFERENCES</div>\n              <Radios\n                handleClick={this.handleRadioChange}\n                labels={[\n                  'I identify as male',\n                  'I identify as female',\n                  'I identify as nonbinary',\n                ]}\n                name=\"gender\"\n                responses={['Male', 'Female', 'Nonbinary']}\n                value={this.state.gender}\n              />\n            </div>\n            <div className=\"bottom-elements\">\n              <div className=\"question-header\">GENDER PREFERENCES</div>\n              <Checkboxes\n                handleClick={this.handleCheckboxChange}\n                labels={[\n                  'I want to be matched with males',\n                  'I want to be matched with females',\n                  'I want to be match with nonbinary people',\n                ]}\n                name=\"lookingForGender\"\n                responses={['Male', 'Female', 'Nonbinary']}\n                values={this.state.lookingForGender}\n              />\n            </div>\n            <div className=\"bottom-elements\">\n              <div className=\"question-header\">SIMILAR OR DIFFERENT</div>\n              <Radios\n                handleClick={this.handleRadioChange}\n                labels={[\n                  'I want to be matched with similar people to me',\n                  'I want to be matched with different people to me',\n                ]}\n                name=\"matchType\"\n                responses={['similar', 'different']}\n                value={this.state.matchType}\n              />\n            </div>\n            {(college === 'Harvard' || college === 'MIT') && (\n              <div className=\"bottom-elements\">\n                <div className=\"question-header\">HARVARD-MIT MATCHES</div>\n                <Checkboxes\n                  handleClick={this.handleCheckboxChange}\n                  labels={['I want to opt in to cross Harvard-MIT matches!']}\n                  name=\"harvardMIT\"\n                  responses={['Yes']}\n                  values={this.state.harvardMIT}\n                />\n              </div>\n            )}\n            <div className=\"bottom-elements\">\n              <div className=\"question-header\">SHOW IN SEARCH</div>\n              <Toggle\n                defaultChecked={this.state.show}\n                onChange={this.handleToggleChange}\n              />\n            </div>\n          </div>\n          <br />\n          <div className=\"save-button\">\n            <button\n              onClick={this.saveProfile}\n              style={{\n                opacity: filled ? 1 : 0.8,\n                margin: '0 auto',\n              }}\n            >\n              Save Changes\n            </button>\n          </div>\n          {!filled && (\n            <div className=\"incomplete-message\">\n              Please fully complete profile before saving.\n            </div>\n          )}\n          {!changed && (\n            <div className=\"incomplete-message\">You have unsaved changes.</div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n    email: state.firebase.auth.email,\n    profile: state.firebase.profile,\n    profile_pic: state.firebase.profile.profile_pic,\n    updateProfile: props.firebase.updateProfile,\n  };\n};\n\nexport default compose(\n  firebaseConnect(),\n  connect(mapStateToProps),\n)(PageProfile);\n"]},"metadata":{},"sourceType":"module"}