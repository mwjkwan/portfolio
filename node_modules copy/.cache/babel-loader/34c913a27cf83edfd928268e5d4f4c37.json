{"ast":null,"code":"import _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/PageAuth/routes/PageConfirmEmail.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthWrapper from 'components/AuthWrapper';\nimport queryString from 'query-string';\nimport Loading from 'components/Loading';\n\nvar PageConfirmEmail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageConfirmEmail, _Component);\n\n  function PageConfirmEmail() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PageConfirmEmail);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PageConfirmEmail)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      resent: false,\n      loading: false,\n      verfied: false,\n      error: _this.props.oobCode ? 'Verifying your email...' : 'A verification email has been sent to your email address, ' + _this.props.email + '.'\n    };\n\n    _this.verifyEmail = function () {\n      var values = queryString.parse(_this.props.location.search, {\n        ignoreQueryPrefix: true\n      });\n\n      if (values.oobCode) {\n        _this.props.firebase.auth().applyActionCode(values.oobCode).then(function () {\n          _this.setState({\n            verified: true,\n            error: 'Verified!'\n          });\n\n          if (_this.props.isLoggedIn) {\n            window.location.reload();\n          }\n        }).catch(function (err) {\n          _this.setState({\n            error: err.message\n          });\n        });\n      }\n    };\n\n    _this.renderConfirm = function () {\n      if (_this.props.isLoggedIn) {\n        if (_this.props.emailVerified) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 54\n            },\n            __self: this\n          }, \"You're verified!\", ' ', React.createElement(Link, {\n            to: \"/app\",\n            style: {\n              fontFamily: 'apercu',\n              color: 'black'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, \"Click here get started!\"));\n        }\n\n        if (_this.state.loading) {\n          return React.createElement(Loading, {\n            style: {\n              height: 50\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          });\n        } else {\n          if (!_this.state.resent) {\n            return React.createElement(\"button\", {\n              onClick: function onClick() {\n                _this.setState({\n                  loading: true\n                });\n\n                _this.props.firebase.auth().currentUser.sendEmailVerification().then(function () {\n                  _this.setState({\n                    resent: true,\n                    loading: false,\n                    error: 'Verification email resent. Please check your inbox.'\n                  });\n                }).catch(function (err) {\n                  _this.setState({\n                    error: err.message,\n                    loading: false\n                  });\n                });\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 68\n              },\n              __self: this\n            }, \"resend verification email\");\n          }\n        }\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, _this.state.verified ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"You've been verified! Log back in by clicking\", ' ', React.createElement(Link, {\n          to: \"/login\",\n          style: {\n            fontFamily: 'apercu',\n            color: 'black'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"here\"), ' ', \"to get started!\") : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, _this.state.error));\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(PageConfirmEmail, [{\n    key: \"componentDidMount\",\n    // componentDidUpdate() {\n    //   this.verifyEmail();\n    // }\n    value: function componentDidMount() {\n      this.verifyEmail();\n\n      if (this.props.emailVerified) {\n        this.props.history.push('/app');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"PageConfirmEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(AuthWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Confirm Your Email\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, this.state.error), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), this.renderConfirm(), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })), this.props.isLoggedIn && React.createElement(\"button\", {\n        onClick: this.props.logoutUser,\n        style: {\n          background: 'none',\n          // color: 'black',\n          color: 'rgba(0, 0, 0, 0.5)',\n          fontSize: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"logout\"));\n    }\n  }]);\n\n  return PageConfirmEmail;\n}(Component);\n\nexport { PageConfirmEmail as default };","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/PageAuth/routes/PageConfirmEmail.js"],"names":["React","Component","Link","AuthWrapper","queryString","Loading","PageConfirmEmail","state","resent","loading","verfied","error","props","oobCode","email","verifyEmail","values","parse","location","search","ignoreQueryPrefix","firebase","auth","applyActionCode","then","setState","verified","isLoggedIn","window","reload","catch","err","message","renderConfirm","emailVerified","fontFamily","color","height","currentUser","sendEmailVerification","history","push","logoutUser","background","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthWrapper from 'components/AuthWrapper';\nimport queryString from 'query-string';\nimport Loading from 'components/Loading';\n\nexport default class PageConfirmEmail extends Component {\n  state = {\n    resent: false,\n    loading: false,\n    verfied: false,\n    error: this.props.oobCode\n      ? 'Verifying your email...'\n      : 'A verification email has been sent to your email address, ' +\n        this.props.email +\n        '.',\n  };\n\n  verifyEmail = () => {\n    let values = queryString.parse(this.props.location.search, {\n      ignoreQueryPrefix: true,\n    });\n    if (values.oobCode) {\n      this.props.firebase\n        .auth()\n        .applyActionCode(values.oobCode)\n        .then(() => {\n          this.setState({ verified: true, error: 'Verified!' });\n          if (this.props.isLoggedIn) {\n            window.location.reload();\n          }\n        })\n        .catch(err => {\n          this.setState({ error: err.message });\n        });\n    }\n  };\n\n  // componentDidUpdate() {\n  //   this.verifyEmail();\n  // }\n\n  componentDidMount() {\n    this.verifyEmail();\n    if (this.props.emailVerified) {\n      this.props.history.push('/app');\n    }\n  }\n\n  renderConfirm = () => {\n    if (this.props.isLoggedIn) {\n      if (this.props.emailVerified) {\n        return (\n          <div>\n            You're verified!{' '}\n            <Link to=\"/app\" style={{ fontFamily: 'apercu', color: 'black' }}>\n              Click here get started!\n            </Link>\n          </div>\n        );\n      }\n\n      if (this.state.loading) {\n        return <Loading style={{ height: 50 }} />;\n      } else {\n        if (!this.state.resent) {\n          return (\n            <button\n              onClick={() => {\n                this.setState({ loading: true });\n                this.props.firebase\n                  .auth()\n                  .currentUser.sendEmailVerification()\n                  .then(() => {\n                    this.setState({\n                      resent: true,\n                      loading: false,\n                      error:\n                        'Verification email resent. Please check your inbox.',\n                    });\n                  })\n                  .catch(err => {\n                    this.setState({ error: err.message, loading: false });\n                  });\n              }}\n            >\n              resend verification email\n            </button>\n          );\n        }\n      }\n    } else {\n      return (\n        <div>\n          {this.state.verified ? (\n            <div>\n              You've been verified! Log back in by clicking{' '}\n              <Link\n                to=\"/login\"\n                style={{ fontFamily: 'apercu', color: 'black' }}\n              >\n                here\n              </Link>{' '}\n              to get started!\n            </div>\n          ) : (\n            <div>{this.state.error}</div>\n          )}\n        </div>\n      );\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"PageConfirmEmail\">\n        <AuthWrapper>\n          <h1>Confirm Your Email</h1>\n          <br />\n          <div>{this.state.error}</div>\n          <br />\n          <br />\n          {this.renderConfirm()}\n          <br />\n          <br />\n        </AuthWrapper>\n        {this.props.isLoggedIn && (\n          <button\n            onClick={this.props.logoutUser}\n            style={{\n              background: 'none',\n              // color: 'black',\n              color: 'rgba(0, 0, 0, 0.5)',\n              fontSize: 14,\n            }}\n          >\n            logout\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}