{"ast":null,"code":"import _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/components/PicUpload.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  display: inline-block;\\n  background: #9b9b9b;\\n\\n  input {\\n    display: none;\\n  }\\n\\n  .imagehover {\\n    position: absolute;\\n    top: 0px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    cursor: pointer;\\n    opacity: 0;\\n\\n    &:hover {\\n      opacity: 0.7;\\n    }\\n\\n    i {\\n      font-size: 40px;\\n      opacity: 0.7;\\n      cursor: pointer;\\n      color: #3b3b3b;\\n    }\\n\\n    img {\\n      background: white;\\n    }\\n  }\\n\\n  .profile-pic {\\n    object-fit: cover;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx */\nimport React, { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect, firebaseConnect } from 'react-redux-firebase';\nimport Loading from 'components/Loading';\nvar picUploadStyle = css(_templateObject());\nvar loadingStyle = css(_templateObject2());\n\nvar PicUpload =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PicUpload, _Component);\n\n  function PicUpload(props) {\n    var _this;\n\n    _classCallCheck(this, PicUpload);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PicUpload).call(this, props));\n\n    _this.onChange = function _callee(e) {\n      var _this$props, path, name, uploadFile, updateURL, _ref, uploadTaskSnapshot, downloadURL;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, path = _this$props.path, name = _this$props.name, uploadFile = _this$props.uploadFile, updateURL = _this$props.updateURL;\n\n              _this.setState({\n                loading: true\n              });\n\n              _context.prev = 2;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(uploadFile(path, e.target.files[0], null, {\n                name: name + '.jpg'\n              }));\n\n            case 5:\n              _ref = _context.sent;\n              uploadTaskSnapshot = _ref.uploadTaskSnapshot;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(uploadTaskSnapshot.ref.getDownloadURL());\n\n            case 9:\n              downloadURL = _context.sent;\n              updateURL({\n                profile_pic: downloadURL\n              });\n\n              _this.setState({\n                loading: false,\n                pic: downloadURL\n              });\n\n              _context.next = 19;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0.message);\n              alert('Invalid image file or image file too large (max 5MB limit).');\n\n              _this.setState({\n                loading: false\n              });\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 14]]);\n    };\n\n    _this.file = React.createRef();\n    _this.state = {\n      pic: props.original_pic,\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(PicUpload, [{\n    key: \"renderProfilePic\",\n    value: function renderProfilePic() {\n      var size = this.props.size;\n      var pic = this.state.pic;\n\n      if (pic) {\n        return jsx(\"img\", {\n          alt: \"profile pic\",\n          className: \"profile-pic\",\n          src: pic,\n          style: {\n            height: size,\n            width: size\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var size = this.props.size;\n\n      if (this.state.loading) {\n        return jsx(\"div\", {\n          css: loadingStyle,\n          style: {\n            height: size,\n            width: size\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, jsx(Loading, {\n          type: \"spin\",\n          size: size / 2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }));\n      }\n\n      return jsx(\"div\", {\n        className: \"PicUpload\",\n        css: picUploadStyle,\n        style: {\n          height: size,\n          width: size\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, jsx(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, jsx(\"input\", {\n        accept: \"image/*\",\n        ref: this.file,\n        type: \"file\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), this.renderProfilePic(), jsx(\"div\", {\n        className: \"imagehover\",\n        style: {\n          height: size,\n          opacity: this.state.pic ? null : 0.9,\n          width: size\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, jsx(\"img\", {\n        alt: \"upload\",\n        src: require('assets/picupload.png'),\n        style: {\n          height: size,\n          width: size\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return PicUpload;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_state, props) {\n  return {\n    uploadFile: props.firebase.uploadFile\n  };\n};\n\nexport default compose(firebaseConnect(), firestoreConnect(), connect(mapStateToProps))(PicUpload);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/components/PicUpload.js"],"names":["React","Component","jsx","css","connect","compose","firestoreConnect","firebaseConnect","Loading","picUploadStyle","loadingStyle","PicUpload","props","onChange","e","path","name","uploadFile","updateURL","setState","loading","target","files","uploadTaskSnapshot","ref","getDownloadURL","downloadURL","profile_pic","pic","console","log","message","alert","file","createRef","state","original_pic","size","height","width","renderProfilePic","opacity","require","mapStateToProps","_state","firebase"],"mappings":"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","sourcesContent":["/** @jsx jsx */\n\nimport React, { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect, firebaseConnect } from 'react-redux-firebase';\n\nimport Loading from 'components/Loading';\n\nconst picUploadStyle = css`\n  position: relative;\n  display: inline-block;\n  background: #9b9b9b;\n\n  input {\n    display: none;\n  }\n\n  .imagehover {\n    position: absolute;\n    top: 0px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    opacity: 0;\n\n    &:hover {\n      opacity: 0.7;\n    }\n\n    i {\n      font-size: 40px;\n      opacity: 0.7;\n      cursor: pointer;\n      color: #3b3b3b;\n    }\n\n    img {\n      background: white;\n    }\n  }\n\n  .profile-pic {\n    object-fit: cover;\n  }\n`;\n\nconst loadingStyle = css`\n  align-items: center;\n  display: flex;\n  justify-content: center;\n`;\n\nclass PicUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.file = React.createRef();\n    this.state = { pic: props.original_pic, loading: false };\n  }\n\n  onChange = async e => {\n    const { path, name, uploadFile, updateURL } = this.props;\n\n    this.setState({ loading: true });\n\n    try {\n      const { uploadTaskSnapshot } = await uploadFile(\n        path,\n        e.target.files[0],\n        null,\n        { name: name + '.jpg' },\n      );\n      const downloadURL = await uploadTaskSnapshot.ref.getDownloadURL();\n      updateURL({ profile_pic: downloadURL });\n      this.setState({ loading: false, pic: downloadURL });\n    } catch (error) {\n      console.log(error.message);\n      alert('Invalid image file or image file too large (max 5MB limit).');\n      this.setState({ loading: false });\n    }\n  };\n\n  renderProfilePic() {\n    const { size } = this.props;\n    const { pic } = this.state;\n    if (pic) {\n      return (\n        <img\n          alt=\"profile pic\"\n          className=\"profile-pic\"\n          src={pic}\n          style={{ height: size, width: size }}\n        />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    const { size } = this.props;\n    if (this.state.loading) {\n      return (\n        <div css={loadingStyle} style={{ height: size, width: size }}>\n          <Loading type=\"spin\" size={size / 2} />\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className=\"PicUpload\"\n        css={picUploadStyle}\n        style={{ height: size, width: size }}\n      >\n        <label>\n          <input\n            accept=\"image/*\"\n            ref={this.file}\n            type=\"file\"\n            onChange={this.onChange}\n          />\n\n          {this.renderProfilePic()}\n\n          <div\n            className=\"imagehover\"\n            style={{\n              height: size,\n              opacity: this.state.pic ? null : 0.9,\n              width: size,\n            }}\n          >\n            <img\n              alt=\"upload\"\n              src={require('assets/picupload.png')}\n              style={{ height: size, width: size }}\n            />\n          </div>\n        </label>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (_state, props) => {\n  return {\n    uploadFile: props.firebase.uploadFile,\n  };\n};\n\nexport default compose(\n  firebaseConnect(),\n  firestoreConnect(),\n  connect(mapStateToProps),\n)(PicUpload);\n"]},"metadata":{},"sourceType":"module"}