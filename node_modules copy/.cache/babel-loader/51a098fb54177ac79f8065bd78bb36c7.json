{"ast":null,"code":"import _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/PageConfirmEmail.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport { withRouter } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\nimport AuthWrapper from 'components/AuthWrapper';\nimport Loading from 'components/Loading';\n\nvar PageConfirmEmail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageConfirmEmail, _Component);\n\n  function PageConfirmEmail(props) {\n    var _this;\n\n    _classCallCheck(this, PageConfirmEmail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PageConfirmEmail).call(this, props));\n\n    _this.verifyEmail = function _callee() {\n      var _this$props, auth, email, history, isLoggedIn, _this$state, continueUrl, oobCode, continuePath;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, auth = _this$props.auth, email = _this$props.email, history = _this$props.history, isLoggedIn = _this$props.isLoggedIn;\n              _this$state = _this.state, continueUrl = _this$state.continueUrl, oobCode = _this$state.oobCode;\n              continuePath = '/app';\n\n              if (continueUrl) {\n                continuePath = continueUrl.split(process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT)[1];\n              }\n\n              if (!oobCode) {\n                _context.next = 18;\n                break;\n              }\n\n              _this.setState({\n                error: 'Verifying your email...'\n              });\n\n              _context.prev = 6;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(auth().applyActionCode(oobCode));\n\n            case 9:\n              _this.setState({\n                error: 'Verified!',\n                verified: true\n              });\n\n              if (isLoggedIn) {\n                history.push(continuePath);\n                window.location.reload();\n              }\n\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](6);\n\n              _this.setState({\n                error: _context.t0.message\n              });\n\n            case 16:\n              _context.next = 19;\n              break;\n\n            case 18:\n              _this.setState({\n                error: \"A verification email has been sent to your email address, \".concat(email, \".\")\n              });\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[6, 13]]);\n    };\n\n    _this.onClick = function _callee2() {\n      var _this$props2, appPath, auth;\n\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props2 = _this.props, appPath = _this$props2.appPath, auth = _this$props2.auth;\n\n              _this.setState({\n                loading: true\n              });\n\n              _context2.prev = 2;\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(auth().currentUser.sendEmailVerification({\n                url: \"\".concat(process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT).concat(appPath)\n              }));\n\n            case 5:\n              _this.setState({\n                error: 'Verification email resent. Please check your inbox.',\n                loading: false,\n                resent: true\n              });\n\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](2);\n\n              _this.setState({\n                error: _context2.t0.message,\n                loading: false\n              });\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[2, 8]]);\n    };\n\n    _this.renderButton = function () {\n      var _this$props3 = _this.props,\n          appPath = _this$props3.appPath,\n          isLoggedIn = _this$props3.isLoggedIn;\n      var _this$state2 = _this.state,\n          loading = _this$state2.loading,\n          resent = _this$state2.resent,\n          verified = _this$state2.verified;\n\n      if (loading) {\n        return React.createElement(Loading, {\n          size: 64,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        });\n      }\n\n      if (isLoggedIn && !resent) {\n        return React.createElement(\"button\", {\n          onClick: _this.onClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \"Resend verification email\");\n      }\n\n      if (!isLoggedIn && verified) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"You're verified!\", ' ', React.createElement(Link, {\n          to: appPath,\n          style: {\n            fontFamily: 'apercu',\n            color: 'black'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \"Click here to get started!\"));\n      }\n    };\n\n    var _queryString$parse = queryString.parse(props.location.search, {\n      ignoreQueryPrefix: true\n    }),\n        _continueUrl = _queryString$parse.continueUrl,\n        _oobCode = _queryString$parse.oobCode;\n\n    _this.state = {\n      continueUrl: _continueUrl,\n      error: '',\n      loading: false,\n      oobCode: _oobCode,\n      resent: false,\n      verfied: false\n    };\n    return _this;\n  }\n\n  _createClass(PageConfirmEmail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props4 = this.props,\n          appPath = _this$props4.appPath,\n          emailVerified = _this$props4.emailVerified,\n          history = _this$props4.history,\n          isLoggedIn = _this$props4.isLoggedIn,\n          loginPath = _this$props4.loginPath;\n\n      if (!isLoggedIn && !this.state.oobCode) {\n        history.push(loginPath);\n      }\n\n      if (isLoggedIn && emailVerified) {\n        history.push(appPath);\n      }\n\n      this.verifyEmail();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props5 = this.props,\n          isLoggedIn = _this$props5.isLoggedIn,\n          logoutUser = _this$props5.logoutUser,\n          portal = _this$props5.portal;\n      var _this$state3 = this.state,\n          error = _this$state3.error,\n          verified = _this$state3.verified;\n      return React.createElement(\"div\", {\n        className: \"PageConfirmEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(AuthWrapper, {\n        portal: portal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Confirm Your Email\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), !verified && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, error), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), this.renderButton(), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), isLoggedIn && React.createElement(\"div\", {\n        onClick: logoutUser,\n        style: {\n          background: 'none',\n          color: 'white',\n          fontSize: 16,\n          cursor: 'pointer',\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Logout\"));\n    }\n  }]);\n\n  return PageConfirmEmail;\n}(Component);\n\nPageConfirmEmail.defaultProps = {\n  appPath: '/app',\n  loginPath: '/login'\n};\n\nfunction mapStateToProps(state, props) {\n  var _props$firebase = props.firebase,\n      auth = _props$firebase.auth,\n      logout = _props$firebase.logout;\n  var _state$firebase$auth = state.firebase.auth,\n      email = _state$firebase$auth.email,\n      emailVerified = _state$firebase$auth.emailVerified,\n      uid = _state$firebase$auth.uid;\n  return {\n    auth: auth,\n    email: email,\n    emailVerified: emailVerified,\n    isLoggedIn: !!uid,\n    logoutUser: logout\n  };\n}\n\nexport default compose(firebaseConnect(), withRouter, connect(mapStateToProps))(PageConfirmEmail);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/PageConfirmEmail.js"],"names":["React","Component","connect","compose","firebaseConnect","withRouter","queryString","Link","AuthWrapper","Loading","PageConfirmEmail","props","verifyEmail","auth","email","history","isLoggedIn","state","continueUrl","oobCode","continuePath","split","process","env","REACT_APP_CONFIRMATION_EMAIL_REDIRECT","setState","error","applyActionCode","verified","push","window","location","reload","message","onClick","appPath","loading","currentUser","sendEmailVerification","url","resent","renderButton","fontFamily","color","parse","search","ignoreQueryPrefix","verfied","emailVerified","loginPath","logoutUser","portal","background","fontSize","cursor","textAlign","defaultProps","mapStateToProps","firebase","logout","uid"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport { withRouter } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { Link } from 'react-router-dom';\n\nimport AuthWrapper from 'components/AuthWrapper';\nimport Loading from 'components/Loading';\n\nclass PageConfirmEmail extends Component {\n  constructor(props) {\n    super(props);\n\n    const { continueUrl, oobCode } = queryString.parse(props.location.search, {\n      ignoreQueryPrefix: true,\n    });\n\n    this.state = {\n      continueUrl,\n      error: '',\n      loading: false,\n      oobCode,\n      resent: false,\n      verfied: false,\n    };\n  }\n\n  verifyEmail = async () => {\n    const { auth, email, history, isLoggedIn } = this.props;\n    const { continueUrl, oobCode } = this.state;\n\n    let continuePath = '/app';\n    if (continueUrl) {\n      continuePath = continueUrl.split(\n        process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT,\n      )[1];\n    }\n\n    if (oobCode) {\n      this.setState({ error: 'Verifying your email...' });\n      try {\n        await auth().applyActionCode(oobCode);\n        this.setState({ error: 'Verified!', verified: true });\n\n        if (isLoggedIn) {\n          history.push(continuePath);\n          window.location.reload();\n        }\n      } catch (error) {\n        this.setState({ error: error.message });\n      }\n    } else {\n      this.setState({\n        error: `A verification email has been sent to your email address, ${email}.`,\n      });\n    }\n  };\n\n  onClick = async () => {\n    const { appPath, auth } = this.props;\n    this.setState({ loading: true });\n    try {\n      await auth().currentUser.sendEmailVerification({\n        url: `${process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT}${appPath}`,\n      });\n      this.setState({\n        error: 'Verification email resent. Please check your inbox.',\n        loading: false,\n        resent: true,\n      });\n    } catch (error) {\n      this.setState({ error: error.message, loading: false });\n    }\n  };\n\n  renderButton = () => {\n    const { appPath, isLoggedIn } = this.props;\n    const { loading, resent, verified } = this.state;\n\n    if (loading) {\n      return <Loading size={64} />;\n    }\n\n    if (isLoggedIn && !resent) {\n      return <button onClick={this.onClick}>Resend verification email</button>;\n    }\n\n    if (!isLoggedIn && verified) {\n      return (\n        <div>\n          You're verified!{' '}\n          <Link to={appPath} style={{ fontFamily: 'apercu', color: 'black' }}>\n            Click here to get started!\n          </Link>\n        </div>\n      );\n    }\n  };\n\n  componentDidMount() {\n    const {\n      appPath,\n      emailVerified,\n      history,\n      isLoggedIn,\n      loginPath,\n    } = this.props;\n\n    if (!isLoggedIn && !this.state.oobCode) {\n      history.push(loginPath);\n    }\n\n    if (isLoggedIn && emailVerified) {\n      history.push(appPath);\n    }\n\n    this.verifyEmail();\n  }\n\n  render() {\n    const { isLoggedIn, logoutUser, portal } = this.props;\n    const { error, verified } = this.state;\n\n    return (\n      <div className=\"PageConfirmEmail\">\n        <AuthWrapper portal={portal}>\n          <h1>Confirm Your Email</h1>\n          <br />\n          {!verified && <div>{error}</div>}\n          <br />\n          <br />\n          {this.renderButton()}\n          <br />\n          <br />\n        </AuthWrapper>\n\n        {isLoggedIn && (\n          <div\n            onClick={logoutUser}\n            style={{\n              background: 'none',\n              color: 'white',\n              fontSize: 16,\n              cursor: 'pointer',\n              textAlign: 'center',\n            }}\n          >\n            Logout\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nPageConfirmEmail.defaultProps = {\n  appPath: '/app',\n  loginPath: '/login',\n};\n\nfunction mapStateToProps(state, props) {\n  const { auth, logout } = props.firebase;\n  const { email, emailVerified, uid } = state.firebase.auth;\n\n  return {\n    auth,\n    email,\n    emailVerified: emailVerified,\n    isLoggedIn: !!uid,\n    logoutUser: logout,\n  };\n}\n\nexport default compose(\n  firebaseConnect(),\n  withRouter,\n  connect(mapStateToProps),\n)(PageConfirmEmail);\n"]},"metadata":{},"sourceType":"module"}