{"ast":null,"code":"import _slicedToArray from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/PageResults/routes/PageList.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  .info {\\n    width: calc(100% - 140px);\\n    margin: 0px 0px 0px 20px;\\n    word-wrap: break-word;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n\\n    button {\\n      width: 190px;\\n      height: 25px;\\n      padding: 2px;\\n      font-family: 'Apercu';\\n      font-size: 14px;\\n      letter-spacing: 0.145em;\\n      text-decoration-line: underline;\\n    }\\n\\n    #match {\\n      width: 70px;\\n    }\\n    #see-match {\\n      width: 105px;\\n    }\\n  }\\n\\n  .basics {\\n    padding-bottom: 2px;\\n    font-family: 'Inconsolata';\\n    font-style: medium;\\n    font-weight: 500;\\n    font-size: 15px;\\n    line-height: 17px;\\n    color: #bd574e;\\n  }\\n  .name {\\n    font-family: 'Apercu';\\n    font-size: 24px;\\n    line-height: 29px;\\n  }\\n  .icons {\\n    float: right;\\n  }\\n  .description {\\n    display: inline-block;\\n    padding-bottom: 8px;\\n    line-height: 19px;\\n  }\\n  #search {\\n    margin-top: 10px;\\n    width: 418px;\\n    height: 40px;\\n    border: none;\\n    background: #f4f2f2;\\n    display: flex;\\n    align-items: center;\\n    letter-spacing: 0.05em;\\n    color: #757575;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx **/\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport { isEmpty } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\nimport { compose } from 'redux';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport Header from 'components/Header';\nimport MatchView from 'components/MatchView';\nimport PageINPROGRESS from './PageINPROGRESS';\nimport RightSidebar from './RightSidebar';\nimport MatchSidebar from './MatchSidebar';\nvar pageListStyle = css(_templateObject());\n\nvar PageList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageList, _Component);\n\n  function PageList(props) {\n    var _this;\n\n    _classCallCheck(this, PageList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PageList).call(this, props));\n\n    _this.handleKeyPress = function _callee(event) {\n      var search, name, first, last, _ref, data;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              search = _this.state.search;\n\n              if (!(event.key === 'Enter' && search)) {\n                _context.next = 11;\n                break;\n              }\n\n              _this.setState({\n                searching: true\n              });\n\n              name = search.trim().toLowerCase().split(' ');\n              first = name[0];\n              last = name.length > 1 ? name[name.length - 1] : '';\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(_this.props.firebase.functions().httpsCallable('user-userSearch')({\n                first: first,\n                last: last\n              }));\n\n            case 8:\n              _ref = _context.sent;\n              data = _ref.data;\n\n              _this.setState({\n                searches: data\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var eventValue = event.target.value;\n      var value = eventValue.trim();\n\n      if (value === '') {\n        _this.setState({\n          search: '',\n          searches: [],\n          searching: false\n        });\n\n        return;\n      }\n\n      _this.setState({\n        search: eventValue\n      });\n    };\n\n    _this.renderMessage = function () {\n      var status = _this.props.status;\n\n      if (status === 'live-survey') {\n        return jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \"Your matches come out on \", jsx(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \"Friday, September 20\"), \"! Make sure to finalize \", jsx(Link, {\n          to: \"/app/survey\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"your survey!\")), jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }), jsx(PageINPROGRESS, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }));\n      } else if (status === 'live-processing') {\n        return jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"We're calculating matches now! Hang tight!\"), jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }), jsx(PageINPROGRESS, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }));\n      } else {\n        return jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, \"Survey and matches are officially closed! If you have no matches, it looks like you didn't fill out the survey fully :(\");\n      }\n    };\n\n    _this.renderSearch = function () {\n      return jsx(\"input\", {\n        id: \"search\",\n        onChange: _this.handleInputChange,\n        onKeyPress: _this.handleKeyPress,\n        placeholder: \"Hate your matches? Search more people here\",\n        type: \"text\",\n        value: _this.state.search,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      });\n    };\n\n    _this.canDateOnClick = function (matchedUser, matchId, meUser) {\n      return _this.setState({\n        matchedUser: matchedUser,\n        matchId: matchId,\n        meUser: meUser,\n        showMatchSidebar: false,\n        showRightSidebar: true\n      });\n    };\n\n    _this.matchOnClick = function (matchedUser, matchId, meUser) {\n      _this.props.firebase.update('/matches/' + matchId + '/matched', _defineProperty({}, meUser.id, true));\n\n      _this.setState({\n        matchedUser: matchedUser,\n        matchId: matchId,\n        meUser: meUser,\n        showMatchSidebar: true,\n        showRightSidebar: false\n      });\n    };\n\n    _this.closeSidebar = function () {\n      _this.setState({\n        showMatchSidebar: false,\n        showRightSidebar: false\n      });\n    };\n\n    _this.state = {\n      // search state\n      search: '',\n      searches: [],\n      searching: false,\n      // right sidebar state\n      showRightSidebar: false\n    };\n    return _this;\n  }\n\n  _createClass(PageList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          email_to_college = _this$props.email_to_college,\n          matches = _this$props.matches,\n          status = _this$props.status,\n          uid = _this$props.uid;\n\n      if (isEmpty(matches) || status !== 'live-matches' && status !== 'development') {\n        return jsx(\"div\", {\n          className: \"PageList\",\n          css: pageListStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, jsx(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, \"RESULTS\"), this.renderSearch(), jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }), this.renderMessage());\n      }\n\n      var _this$state = this.state,\n          searching = _this$state.searching,\n          searches = _this$state.searches;\n\n      if (searching) {\n        return jsx(\"div\", {\n          className: \"PageList\",\n          css: pageListStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, jsx(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, \"RESULTS\"), this.renderSearch(), jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }), Object.keys(searches).map(function (userId) {\n          var user = searches[userId];\n\n          if (!user.name) {\n            return null;\n          }\n\n          return jsx(MatchView, Object.assign({\n            email_to_college: _this2.props.email_to_college,\n            key: userId\n          }, user, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 230\n            },\n            __self: this\n          }));\n        }), searches.length === 0 && jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, \" No results. Try to be more generic. \"));\n      }\n\n      var sortable = Object.keys(matches).map(function (matchId) {\n        var _matches$matchId = matches[matchId],\n            canDate = _matches$matchId.canDate,\n            rating = _matches$matchId.rating;\n        return [matchId, canDate ? rating + 10000 : rating];\n      });\n      sortable.sort(function (a, b) {\n        return b[1] - a[1];\n      });\n      var ids = sortable.map(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            matchId = _ref3[0],\n            _rating = _ref3[1];\n\n        return matchId;\n      });\n      var _this$state2 = this.state,\n          matchedUser = _this$state2.matchedUser,\n          matchId = _this$state2.matchId,\n          showMatchSidebar = _this$state2.showMatchSidebar,\n          meUser = _this$state2.meUser,\n          showRightSidebar = _this$state2.showRightSidebar;\n      return jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, jsx(\"div\", {\n        className: \"PageList\",\n        css: pageListStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, jsx(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"RESULTS\"), this.renderSearch(), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }), ids.map(function (matchId, counter) {\n        var match = matches[matchId];\n        var matchedUser = match.user1.id === uid ? match.user2 : match.user1;\n        var meUser = match.user1.id !== uid ? match.user2 : match.user1;\n\n        if (!matchedUser.name) {\n          return null;\n        }\n\n        return jsx(MatchView, Object.assign({\n          canDate: match.canDate,\n          compatibility: match.rating,\n          counter: counter + 1,\n          canDateOnClick: function canDateOnClick() {\n            return _this2.canDateOnClick(matchedUser, matchId, meUser);\n          },\n          email_to_college: email_to_college,\n          key: matchId,\n          matched: match.matched ? match.matched[uid] : false,\n          matchOnClick: function matchOnClick() {\n            return _this2.matchOnClick(matchedUser, matchId, meUser);\n          }\n        }, matchedUser, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }));\n      })), showRightSidebar && jsx(RightSidebar, {\n        close: this.closeSidebar,\n        matchedUser: matchedUser,\n        matchId: matchId,\n        meUser: meUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }), showMatchSidebar && jsx(MatchSidebar, {\n        close: this.closeSidebar,\n        matchedUser: matchedUser,\n        matchId: matchId,\n        meUser: meUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return PageList;\n}(Component);\n\nexport default compose(firebaseConnect())(PageList);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/PageResults/routes/PageList.js"],"names":["Component","jsx","css","isEmpty","Link","compose","firebaseConnect","Header","MatchView","PageINPROGRESS","RightSidebar","MatchSidebar","pageListStyle","PageList","props","handleKeyPress","event","search","state","key","setState","searching","name","trim","toLowerCase","split","first","last","length","firebase","functions","httpsCallable","data","searches","handleInputChange","eventValue","target","value","renderMessage","status","renderSearch","canDateOnClick","matchedUser","matchId","meUser","showMatchSidebar","showRightSidebar","matchOnClick","update","id","closeSidebar","email_to_college","matches","uid","Object","keys","map","userId","user","sortable","canDate","rating","sort","a","b","ids","_rating","counter","match","user1","user2","matched"],"mappings":"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","sourcesContent":["/** @jsx jsx **/\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport { isEmpty } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\nimport { compose } from 'redux';\nimport { firebaseConnect } from 'react-redux-firebase';\n\nimport Header from 'components/Header';\nimport MatchView from 'components/MatchView';\nimport PageINPROGRESS from './PageINPROGRESS';\nimport RightSidebar from './RightSidebar';\nimport MatchSidebar from './MatchSidebar';\n\nconst pageListStyle = css`\n  .info {\n    width: calc(100% - 140px);\n    margin: 0px 0px 0px 20px;\n    word-wrap: break-word;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    button {\n      width: 190px;\n      height: 25px;\n      padding: 2px;\n      font-family: 'Apercu';\n      font-size: 14px;\n      letter-spacing: 0.145em;\n      text-decoration-line: underline;\n    }\n\n    #match {\n      width: 70px;\n    }\n    #see-match {\n      width: 105px;\n    }\n  }\n\n  .basics {\n    padding-bottom: 2px;\n    font-family: 'Inconsolata';\n    font-style: medium;\n    font-weight: 500;\n    font-size: 15px;\n    line-height: 17px;\n    color: #bd574e;\n  }\n  .name {\n    font-family: 'Apercu';\n    font-size: 24px;\n    line-height: 29px;\n  }\n  .icons {\n    float: right;\n  }\n  .description {\n    display: inline-block;\n    padding-bottom: 8px;\n    line-height: 19px;\n  }\n  #search {\n    margin-top: 10px;\n    width: 418px;\n    height: 40px;\n    border: none;\n    background: #f4f2f2;\n    display: flex;\n    align-items: center;\n    letter-spacing: 0.05em;\n    color: #757575;\n  }\n`;\n\nclass PageList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // search state\n      search: '',\n      searches: [],\n      searching: false,\n\n      // right sidebar state\n      showRightSidebar: false,\n    };\n  }\n\n  handleKeyPress = async event => {\n    const { search } = this.state;\n\n    if (event.key === 'Enter' && search) {\n      this.setState({ searching: true });\n\n      const name = search\n        .trim()\n        .toLowerCase()\n        .split(' ');\n      const first = name[0];\n      const last = name.length > 1 ? name[name.length - 1] : '';\n\n      const { data } = await this.props.firebase\n        .functions()\n        .httpsCallable('user-userSearch')({ first, last });\n\n      this.setState({ searches: data });\n    }\n  };\n\n  handleInputChange = event => {\n    const eventValue = event.target.value;\n    const value = eventValue.trim();\n\n    if (value === '') {\n      this.setState({ search: '', searches: [], searching: false });\n      return;\n    }\n\n    this.setState({ search: eventValue });\n  };\n\n  renderMessage = () => {\n    const { status } = this.props;\n\n    if (status === 'live-survey') {\n      return (\n        <div>\n          <div>\n            Your matches come out on <b>Friday, September 20</b>! Make sure to\n            finalize <Link to=\"/app/survey\">your survey!</Link>\n          </div>\n          <br />\n          <PageINPROGRESS />\n        </div>\n      );\n    } else if (status === 'live-processing') {\n      return (\n        <div>\n          <div>We're calculating matches now! Hang tight!</div>\n          <br />\n          <PageINPROGRESS />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Survey and matches are officially closed! If you have no matches, it\n          looks like you didn't fill out the survey fully :(\n        </div>\n      );\n    }\n  };\n\n  renderSearch = () => (\n    <input\n      id=\"search\"\n      onChange={this.handleInputChange}\n      onKeyPress={this.handleKeyPress}\n      placeholder=\"Hate your matches? Search more people here\"\n      type=\"text\"\n      value={this.state.search}\n    ></input>\n  );\n\n  canDateOnClick = (matchedUser, matchId, meUser) =>\n    this.setState({\n      matchedUser,\n      matchId,\n      meUser,\n      showMatchSidebar: false,\n      showRightSidebar: true,\n    });\n\n  matchOnClick = (matchedUser, matchId, meUser) => {\n    this.props.firebase.update('/matches/' + matchId + '/matched', {\n      [meUser.id]: true,\n    });\n    this.setState({\n      matchedUser,\n      matchId,\n      meUser,\n      showMatchSidebar: true,\n      showRightSidebar: false,\n    });\n  };\n\n  closeSidebar = () => {\n    this.setState({\n      showMatchSidebar: false,\n      showRightSidebar: false,\n    });\n  };\n\n  render() {\n    const { email_to_college, matches, status, uid } = this.props;\n\n    if (\n      isEmpty(matches) ||\n      (status !== 'live-matches' && status !== 'development')\n    ) {\n      return (\n        <div className=\"PageList\" css={pageListStyle}>\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n          {this.renderMessage()}\n        </div>\n      );\n    }\n\n    const { searching, searches } = this.state;\n\n    if (searching) {\n      return (\n        <div className=\"PageList\" css={pageListStyle}>\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n\n          {Object.keys(searches).map(userId => {\n            const user = searches[userId];\n\n            if (!user.name) {\n              return null;\n            }\n\n            return (\n              <MatchView\n                email_to_college={this.props.email_to_college}\n                key={userId}\n                {...user}\n              />\n            );\n          })}\n\n          {searches.length === 0 && (\n            <div> No results. Try to be more generic. </div>\n          )}\n        </div>\n      );\n    }\n\n    const sortable = Object.keys(matches).map(matchId => {\n      const { canDate, rating } = matches[matchId];\n      return [matchId, canDate ? rating + 10000 : rating];\n    });\n    sortable.sort((a, b) => b[1] - a[1]);\n\n    const ids = sortable.map(([matchId, _rating]) => matchId);\n    const {\n      matchedUser,\n      matchId,\n      showMatchSidebar,\n      meUser,\n      showRightSidebar,\n    } = this.state;\n\n    return (\n      <div>\n        <div className=\"PageList\" css={pageListStyle}>\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n\n          {ids.map((matchId, counter) => {\n            const match = matches[matchId];\n            const matchedUser =\n              match.user1.id === uid ? match.user2 : match.user1;\n            const meUser = match.user1.id !== uid ? match.user2 : match.user1;\n\n            if (!matchedUser.name) {\n              return null;\n            }\n\n            return (\n              <MatchView\n                canDate={match.canDate}\n                compatibility={match.rating}\n                counter={counter + 1}\n                canDateOnClick={() =>\n                  this.canDateOnClick(matchedUser, matchId, meUser)\n                }\n                email_to_college={email_to_college}\n                key={matchId}\n                matched={match.matched ? match.matched[uid] : false}\n                matchOnClick={() =>\n                  this.matchOnClick(matchedUser, matchId, meUser)\n                }\n                {...matchedUser}\n              />\n            );\n          })}\n        </div>\n\n        {showRightSidebar && (\n          <RightSidebar\n            close={this.closeSidebar}\n            matchedUser={matchedUser}\n            matchId={matchId}\n            meUser={meUser}\n          />\n        )}\n\n        {showMatchSidebar && (\n          <MatchSidebar\n            close={this.closeSidebar}\n            matchedUser={matchedUser}\n            matchId={matchId}\n            meUser={meUser}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default compose(firebaseConnect())(PageList);\n"]},"metadata":{},"sourceType":"module"}