{"ast":null,"code":"import _slicedToArray from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/RestaurantPortal/Home.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  // font-weight: bold;\\n\\n  .conf-container {\\n    margin: 20px auto;\\n  }\\n\\n  p {\\n    margin-bottom: 1em;\\n  }\\n\\n  button {\\n    max-width: 170px;\\n    margin-right: 1em;\\n    margin-bottom: 1em;\\n    padding: 0.1em;\\n    height: 25px;\\n  }\\n\\n  input {\\n    max-width: 359px;\\n    height: 40px;\\n    border: none;\\n    background: #f4f2f2;\\n    font-family: 'Apercu-light';\\n    display: flex;\\n    align-items: center;\\n    letter-spacing: 0.05em;\\n\\n    color: #545353;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx **/\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport { withRouter } from 'react-router-dom';\nimport Header from 'components/Header';\nimport Loading from 'components/Loading';\nvar checkInStyle = css(_templateObject());\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.getDate = function (dateId) {\n      return _this.props.firebase.ref(\"/dates/\".concat(dateId)).once('value');\n    };\n\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props$restauran, dates, datePromises, dateSnapshots, dateObjects;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!this.state.loading) {\n                _context.next = 9;\n                break;\n              }\n\n              _this$props$restauran = this.props.restaurantInformation.dates, dates = _this$props$restauran === void 0 ? {} : _this$props$restauran;\n              datePromises = Object.keys(dates).map(function (date) {\n                return _this2.getDate(dates[date]);\n              });\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(Promise.all(datePromises));\n\n            case 5:\n              dateSnapshots = _context.sent;\n              dateObjects = {};\n              dateSnapshots.forEach(function (snapshot) {\n                return dateObjects[snapshot.key] = snapshot.val();\n              });\n              this.setState({\n                dateObjects: dateObjects,\n                loading: false\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"renderDateSchedule\",\n    value: function renderDateSchedule() {\n      var _this$props$restauran2 = this.props.restaurantInformation.dates,\n          dates = _this$props$restauran2 === void 0 ? {} : _this$props$restauran2;\n      var dateObjects = this.state.dateObjects;\n      var orderedDays = Object.keys(dates).sort(function (a, b) {\n        var _a$split$map = a.split('-').map(function (s) {\n          return parseInt(s);\n        }),\n            _a$split$map2 = _slicedToArray(_a$split$map, 2),\n            month1 = _a$split$map2[0],\n            day1 = _a$split$map2[1];\n\n        var _b$split$map = b.split('-').map(function (s) {\n          return parseInt(s);\n        }),\n            _b$split$map2 = _slicedToArray(_b$split$map, 2),\n            month2 = _b$split$map2[0],\n            day2 = _b$split$map2[1];\n\n        return month1 !== month2 ? month1 - month2 : day1 - day2;\n      });\n      return jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Date schedule:\"), jsx(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, jsx(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, jsx(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Date\")), jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Claimed\")), jsx(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Allotted\"))), orderedDays.map(function (date) {\n        var _date$split = date.split('-'),\n            _date$split2 = _slicedToArray(_date$split, 2),\n            month = _date$split2[0],\n            day = _date$split2[1];\n\n        var dateString = new Date(\"\".concat(month, \"/\").concat(day, \"/2020\")).toDateString();\n        var dayOfWeek = dateString.split(' ')[0];\n        var _dateObjects$dates$da = dateObjects[dates[date]],\n            _dateObjects$dates$da2 = _dateObjects$dates$da.datesAllotted,\n            datesAllotted = _dateObjects$dates$da2 === void 0 ? 0 : _dateObjects$dates$da2,\n            _dateObjects$dates$da3 = _dateObjects$dates$da.datesAvailable,\n            datesAvailable = _dateObjects$dates$da3 === void 0 ? 0 : _dateObjects$dates$da3;\n        return jsx(\"tr\", {\n          key: date,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, jsx(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, \"\".concat(month, \"/\").concat(day, \" (\").concat(dayOfWeek, \")\")), jsx(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, datesAllotted - datesAvailable), jsx(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, datesAllotted));\n      }), jsx(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Total\")), jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, Object.values(dateObjects).reduce(function (total, _ref) {\n        var datesAllotted = _ref.datesAllotted,\n            datesAvailable = _ref.datesAvailable;\n        return total + datesAllotted - datesAvailable;\n      }, 0))), jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, Object.values(dateObjects).reduce(function (total, _ref2) {\n        var datesAllotted = _ref2.datesAllotted,\n            datesAvailable = _ref2.datesAvailable;\n        return total + datesAllotted;\n      }, 0)))))));\n    }\n  }, {\n    key: \"renderButtons\",\n    value: function renderButtons() {\n      var _this3 = this;\n\n      return jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, jsx(\"button\", {\n        onClick: function onClick() {\n          return _this3.props.history.push('/restaurant/check-in');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"CHECK-IN ONLINE\"), jsx(\"button\", {\n        onClick: function onClick() {\n          return _this3.props.history.push('/restaurant/confirmation-codes');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"PRINT TODAY'S CODES\"));\n    }\n  }, {\n    key: \"renderInfo\",\n    value: function renderInfo() {\n      var _this$props$restauran3 = this.props.restaurantInformation,\n          contractDescription = _this$props$restauran3.contractDescription,\n          dateDescription = _this$props$restauran3.dateDescription;\n      return jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Date description: \"), dateDescription || jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Placeholder description.\")), jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"Contract description: \"), contractDescription || jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"No contract description found! Contact\", ' ', jsx(\"a\", {\n        href: \"mailto:cupids@datamatch.me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"cupids@datamatch.me\"), \".\")), this.renderDateSchedule());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading) {\n        return jsx(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        });\n      }\n\n      return jsx(\"div\", {\n        className: \"RestaurantHome\",\n        css: checkInStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, jsx(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"RESTAURANT PORTAL\"), jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, jsx(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Welcome to the restaurant portal!\"), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), \"You can print confirmation codes below, or see the agreement you negotiated with the Datamatch team in more detail.\", jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), \"Contact us at\", ' ', jsx(\"a\", {\n        href: \"mailto:cupids@datamatch.me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"cupids@datamatch.me\"), \" if you\\u2019d like to make changes.\"), this.renderButtons(), this.renderInfo());\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default withRouter(Home);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/RestaurantPortal/Home.js"],"names":["Component","jsx","css","withRouter","Header","Loading","checkInStyle","Home","props","getDate","dateId","firebase","ref","once","state","loading","restaurantInformation","dates","datePromises","Object","keys","map","date","Promise","all","dateSnapshots","dateObjects","forEach","snapshot","key","val","setState","orderedDays","sort","a","b","split","s","parseInt","month1","day1","month2","day2","month","day","dateString","Date","toDateString","dayOfWeek","datesAllotted","datesAvailable","values","reduce","total","history","push","contractDescription","dateDescription","renderDateSchedule","renderButtons","renderInfo"],"mappings":"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","sourcesContent":["/** @jsx jsx **/\n\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport { withRouter } from 'react-router-dom';\n\nimport Header from 'components/Header';\nimport Loading from 'components/Loading';\n\nconst checkInStyle = css`\n  // font-weight: bold;\n\n  .conf-container {\n    margin: 20px auto;\n  }\n\n  p {\n    margin-bottom: 1em;\n  }\n\n  button {\n    max-width: 170px;\n    margin-right: 1em;\n    margin-bottom: 1em;\n    padding: 0.1em;\n    height: 25px;\n  }\n\n  input {\n    max-width: 359px;\n    height: 40px;\n    border: none;\n    background: #f4f2f2;\n    font-family: 'Apercu-light';\n    display: flex;\n    align-items: center;\n    letter-spacing: 0.05em;\n\n    color: #545353;\n  }\n`;\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true };\n  }\n\n  getDate = dateId => this.props.firebase.ref(`/dates/${dateId}`).once('value');\n\n  async componentDidMount() {\n    if (this.state.loading) {\n      const { dates = {} } = this.props.restaurantInformation;\n      const datePromises = Object.keys(dates).map(date =>\n        this.getDate(dates[date]),\n      );\n      const dateSnapshots = await Promise.all(datePromises);\n\n      let dateObjects = {};\n      dateSnapshots.forEach(\n        snapshot => (dateObjects[snapshot.key] = snapshot.val()),\n      );\n      this.setState({ dateObjects, loading: false });\n    }\n  }\n\n  renderDateSchedule() {\n    const { dates = {} } = this.props.restaurantInformation;\n    const { dateObjects } = this.state;\n    const orderedDays = Object.keys(dates).sort((a, b) => {\n      const [month1, day1] = a.split('-').map(s => parseInt(s));\n      const [month2, day2] = b.split('-').map(s => parseInt(s));\n      return month1 !== month2 ? month1 - month2 : day1 - day2;\n    });\n\n    return (\n      <div>\n        <b>Date schedule:</b>\n        <table>\n          <tbody>\n            <tr>\n              <th>\n                <b>Date</b>\n              </th>\n              <th>\n                <b>Claimed</b>\n              </th>\n              <th>\n                <b>Allotted</b>\n              </th>\n            </tr>\n            {orderedDays.map(date => {\n              const [month, day] = date.split('-');\n              const dateString = new Date(\n                `${month}/${day}/2020`,\n              ).toDateString();\n              const dayOfWeek = dateString.split(' ')[0];\n              const { datesAllotted = 0, datesAvailable = 0 } = dateObjects[\n                dates[date]\n              ];\n\n              return (\n                <tr key={date}>\n                  <td>{`${month}/${day} (${dayOfWeek})`}</td>\n                  <td>{datesAllotted - datesAvailable}</td>\n                  <td>{datesAllotted}</td>\n                </tr>\n              );\n            })}\n            <tr>\n              <td>\n                <b>Total</b>\n              </td>\n              <td>\n                <b>\n                  {Object.values(dateObjects).reduce(\n                    (total, { datesAllotted, datesAvailable }) =>\n                      total + datesAllotted - datesAvailable,\n                    0,\n                  )}\n                </b>\n              </td>\n              <td>\n                <b>\n                  {Object.values(dateObjects).reduce(\n                    (total, { datesAllotted, datesAvailable }) =>\n                      total + datesAllotted,\n                    0,\n                  )}\n                </b>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n\n  renderButtons() {\n    return (\n      <div>\n        <button onClick={() => this.props.history.push('/restaurant/check-in')}>\n          CHECK-IN ONLINE\n        </button>\n        <button\n          onClick={() =>\n            this.props.history.push('/restaurant/confirmation-codes')\n          }\n        >\n          PRINT TODAY'S CODES\n        </button>\n      </div>\n    );\n  }\n\n  renderInfo() {\n    const {\n      contractDescription,\n      dateDescription,\n    } = this.props.restaurantInformation;\n\n    return (\n      <div>\n        <p>\n          <b>Date description: </b>\n          {dateDescription || <div>Placeholder description.</div>}\n        </p>\n        <p>\n          <b>Contract description: </b>\n          {contractDescription || (\n            <div>\n              No contract description found! Contact{' '}\n              <a href=\"mailto:cupids@datamatch.me\">cupids@datamatch.me</a>.\n            </div>\n          )}\n        </p>\n        {this.renderDateSchedule()}\n      </div>\n    );\n  }\n\n  render() {\n    if (this.state.loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"RestaurantHome\" css={checkInStyle}>\n        <Header>RESTAURANT PORTAL</Header>\n        <p>\n          <b>Welcome to the restaurant portal!</b>\n          <br />\n          You can print confirmation codes below, or see the agreement you\n          negotiated with the Datamatch team in more detail.\n          <br />\n          Contact us at{' '}\n          <a href=\"mailto:cupids@datamatch.me\">cupids@datamatch.me</a> if you’d\n          like to make changes.\n        </p>\n        {this.renderButtons()}\n        {this.renderInfo()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Home);\n"]},"metadata":{},"sourceType":"module"}