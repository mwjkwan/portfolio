{"ast":null,"code":"import _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/PageResults/routes/PageList.js\";\nimport React, { Component } from 'react';\nimport { isEmpty } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\nimport Header from 'components/Header';\nimport PageINPROGRESS from './PageINPROGRESS';\nimport RightSidebar from './RightSidebar';\n\nvar PageList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageList, _Component);\n\n  function PageList(props) {\n    var _this;\n\n    _classCallCheck(this, PageList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PageList).call(this, props));\n\n    _this.fullNameSearch = function (search) {\n      return _this.props.firebase.ref('users').orderByChild('searchName').startAt(search).limitToFirst(10).once('value');\n    };\n\n    _this.lastNameSearch = function (search) {\n      return _this.props.firebase.ref('users').orderByChild('last').startAt(search).limitToFirst(10).once('value');\n    };\n\n    _this.handleKeyPress = function _callee(event) {\n      var searchResults, _this$state, first, last, formattedSearch, dataSnapshot, _dataSnapshot, searches;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(event.key === 'Enter' && _this.state.search)) {\n                _context.next = 16;\n                break;\n              }\n\n              _this.setState({\n                searching: true\n              });\n\n              searchResults = {};\n              _this$state = _this.state, first = _this$state.first, last = _this$state.last, formattedSearch = _this$state.search;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(_this.fullNameSearch(formattedSearch));\n\n            case 6:\n              dataSnapshot = _context.sent;\n              dataSnapshot.forEach(function (childSnapshot) {\n                var childValue = childSnapshot.val();\n                var childName = childValue.searchName.split(' ');\n                var childFirst = childName[0];\n                var childLast = childName[1] || '';\n\n                if (childFirst.includes(first) && childLast.includes(last)) {\n                  searchResults[childSnapshot.key] = childValue;\n                }\n              });\n\n              if (last) {\n                _context.next = 13;\n                break;\n              }\n\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(_this.lastNameSearch(formattedSearch));\n\n            case 11:\n              _dataSnapshot = _context.sent;\n\n              _dataSnapshot.forEach(function (childSnapshot) {\n                var childValue = childSnapshot.val();\n                var childLast = childValue.last || '';\n\n                if (childLast.includes(formattedSearch)) {\n                  searchResults[childSnapshot.key] = childValue;\n                }\n              });\n\n            case 13:\n              searches = Object.keys(searchResults).reduce(function (searches, key) {\n                if (key !== _this.props.uid) {\n                  return searches.concat(searchResults[key]);\n                }\n\n                return searches;\n              }, []);\n              searches.sort(function (a, b) {\n                return a.searchName.localeCompare(b.searchName);\n              });\n\n              _this.setState({\n                searches: searches\n              });\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var value = event.target.value.trim();\n\n      if (value === '') {\n        _this.setState({\n          search: '',\n          searching: false\n        });\n\n        return;\n      }\n\n      var name = value.split(' ');\n      var first = name[0].toLowerCase();\n      var last = name.length > 1 ? name[name.length - 1].toLowerCase() : '';\n      var search = last ? first + ' ' + last : first;\n\n      _this.setState({\n        first: first,\n        last: last,\n        search: search\n      });\n    };\n\n    _this.renderMessage = function () {\n      if (_this.props.status === 'live-survey') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Your matches come out on \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Friday, September 20\"), \"! Make sure to finalize \", React.createElement(Link, {\n          to: \"/app/survey\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, \"your survey!\")), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }), React.createElement(PageINPROGRESS, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }));\n      } else if (_this.props.status === 'live-processing') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"We're calculating matches now! Hang tight!\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }), React.createElement(PageINPROGRESS, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, \"Survey and matches are officially closed! If you have no matches, it looks like you didn't fill out the survey fully :(\");\n      }\n    };\n\n    _this.renderSearch = function () {\n      return React.createElement(\"input\", {\n        id: \"search\",\n        onChange: _this.handleInputChange,\n        onKeyPress: _this.handleKeyPress,\n        placeholder: \"Hate your matches? Search more people here\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      });\n    };\n\n    _this.canDateOnClick = function (match, matchedUser, matchId, meUser) {\n      return _this.setState({\n        match: match,\n        matchedUser: matchedUser,\n        matchId: matchId,\n        meUser: meUser,\n        showRightSidebar: true\n      });\n    };\n\n    _this.state = {\n      // search state\n      search: '',\n      searches: [],\n      searching: false,\n      // right sidebar state\n      showRightSidebar: false\n    };\n    return _this;\n  }\n\n  _createClass(PageList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (isEmpty(this.props.matches) || this.props.status !== 'live-matches' && this.props.status !== 'development') {\n        return React.createElement(\"div\", {\n          className: \"PageList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, \"RESULTS\"), this.renderSearch(), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }), this.renderMessage());\n      }\n\n      if (this.state.searching) {\n        return React.createElement(\"div\", {\n          className: \"PageList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, \"RESULTS\"), this.renderSearch(), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }), Object.keys(this.state.searches).map(function (userId) {\n          var user = _this2.state.searches[userId];\n\n          if (!user.name) {\n            return React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 174\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(MatchView, Object.assign({\n            key: userId\n          }, user, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 177\n            },\n            __self: this\n          }));\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"PageList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"RESULTS\"), this.renderSearch(), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), Object.keys(this.props.matches).map(function (matchId) {\n        var match = _this2.props.matches[matchId];\n        var matchedUser = match.user1.id === _this2.props.uid ? match.user2 : match.user1;\n        var meUser = match.user1.id !== _this2.props.uid ? match.user2 : match.user1;\n\n        if (!matchedUser.name) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          });\n        }\n\n        return React.createElement(MatchView, Object.assign({\n          canDate: match.canDate,\n          canDateOnClick: function canDateOnClick() {\n            return _this2.canDateOnClick(match, matchedUser, matchId, meUser);\n          },\n          key: matchId\n        }, matchedUser, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }));\n      })), this.state.showRightSidebar && React.createElement(RightSidebar, {\n        match: this.state.match,\n        matchedUser: this.state.matchedUser,\n        matchId: this.state.matchId,\n        meUser: this.state.meUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return PageList;\n}(Component);\n\nexport { PageList as default };\n\nvar MatchView = function MatchView(_ref) {\n  var canDate = _ref.canDate,\n      canDateOnClick = _ref.canDateOnClick,\n      description = _ref.description,\n      dorm = _ref.dorm,\n      name = _ref.name,\n      profile_pic = _ref.profile_pic,\n      year = _ref.year;\n  return React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      marginBottom: 30,\n      maxWidth: 600,\n      position: 'relative'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    src: profile_pic || require('assets/empty.png'),\n    style: {\n      width: 125,\n      height: 125,\n      objectFit: 'cover',\n      minWidth: 125,\n      background: \"url(\".concat(require('assets/loading.svg'), \")\"),\n      backgroundSize: 'contain',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"basics\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }, year.toUpperCase() + ', ' + dorm.toUpperCase(), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, name)), React.createElement(\"div\", {\n    className: \"description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }, description), !canDate ? React.createElement(\"button\", {\n    id: \"match\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284\n    },\n    __self: this\n  }, \"MATCH\") : React.createElement(\"button\", {\n    onClick: canDateOnClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286\n    },\n    __self: this\n  }, \"SCHEDULE FREE DATE\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }));\n};","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/PageResults/routes/PageList.js"],"names":["React","Component","isEmpty","Link","Header","PageINPROGRESS","RightSidebar","PageList","props","fullNameSearch","search","firebase","ref","orderByChild","startAt","limitToFirst","once","lastNameSearch","handleKeyPress","event","key","state","setState","searching","searchResults","first","last","formattedSearch","dataSnapshot","forEach","childSnapshot","childValue","val","childName","searchName","split","childFirst","childLast","includes","searches","Object","keys","reduce","uid","concat","sort","a","b","localeCompare","handleInputChange","value","target","trim","name","toLowerCase","length","renderMessage","status","renderSearch","canDateOnClick","match","matchedUser","matchId","meUser","showRightSidebar","matches","map","userId","user","user1","id","user2","canDate","MatchView","description","dorm","profile_pic","year","display","marginBottom","maxWidth","position","require","width","height","objectFit","minWidth","background","backgroundSize","backgroundRepeat","backgroundPosition","toUpperCase"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { isEmpty } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\n\nimport Header from 'components/Header';\nimport PageINPROGRESS from './PageINPROGRESS';\nimport RightSidebar from './RightSidebar';\n\nexport default class PageList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // search state\n      search: '',\n      searches: [],\n      searching: false,\n\n      // right sidebar state\n      showRightSidebar: false,\n    };\n  }\n\n  fullNameSearch = search =>\n    this.props.firebase\n      .ref('users')\n      .orderByChild('searchName')\n      .startAt(search)\n      .limitToFirst(10)\n      .once('value');\n\n  lastNameSearch = search =>\n    this.props.firebase\n      .ref('users')\n      .orderByChild('last')\n      .startAt(search)\n      .limitToFirst(10)\n      .once('value');\n\n  handleKeyPress = async event => {\n    if (event.key === 'Enter' && this.state.search) {\n      this.setState({ searching: true });\n\n      let searchResults = {};\n      const { first, last, search: formattedSearch } = this.state;\n\n      const dataSnapshot = await this.fullNameSearch(formattedSearch);\n\n      dataSnapshot.forEach(childSnapshot => {\n        const childValue = childSnapshot.val();\n        const childName = childValue.searchName.split(' ');\n        const childFirst = childName[0];\n        const childLast = childName[1] || '';\n\n        if (childFirst.includes(first) && childLast.includes(last)) {\n          searchResults[childSnapshot.key] = childValue;\n        }\n      });\n\n      if (!last) {\n        const dataSnapshot = await this.lastNameSearch(formattedSearch);\n        dataSnapshot.forEach(childSnapshot => {\n          const childValue = childSnapshot.val();\n          const childLast = childValue.last || '';\n          if (childLast.includes(formattedSearch)) {\n            searchResults[childSnapshot.key] = childValue;\n          }\n        });\n      }\n\n      const searches = Object.keys(searchResults).reduce((searches, key) => {\n        if (key !== this.props.uid) {\n          return searches.concat(searchResults[key]);\n        }\n        return searches;\n      }, []);\n\n      searches.sort((a, b) => a.searchName.localeCompare(b.searchName));\n      this.setState({ searches: searches });\n    }\n  };\n\n  handleInputChange = event => {\n    const value = event.target.value.trim();\n\n    if (value === '') {\n      this.setState({ search: '', searching: false });\n      return;\n    }\n\n    const name = value.split(' ');\n    const first = name[0].toLowerCase();\n    const last = name.length > 1 ? name[name.length - 1].toLowerCase() : '';\n    const search = last ? first + ' ' + last : first;\n\n    this.setState({ first, last, search });\n  };\n\n  renderMessage = () => {\n    if (this.props.status === 'live-survey') {\n      return (\n        <div>\n          <div>\n            Your matches come out on <b>Friday, September 20</b>! Make sure to\n            finalize <Link to=\"/app/survey\">your survey!</Link>\n          </div>\n          <br />\n          <PageINPROGRESS />\n        </div>\n      );\n    } else if (this.props.status === 'live-processing') {\n      return (\n        <div>\n          <div>We're calculating matches now! Hang tight!</div>\n          <br />\n          <PageINPROGRESS />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Survey and matches are officially closed! If you have no matches, it\n          looks like you didn't fill out the survey fully :(\n        </div>\n      );\n    }\n  };\n\n  renderSearch = () => (\n    <input\n      id=\"search\"\n      onChange={this.handleInputChange}\n      onKeyPress={this.handleKeyPress}\n      placeholder=\"Hate your matches? Search more people here\"\n      type=\"text\"\n    ></input>\n  );\n\n  canDateOnClick = (match, matchedUser, matchId, meUser) =>\n    this.setState({\n      match,\n      matchedUser,\n      matchId,\n      meUser,\n      showRightSidebar: true,\n    });\n\n  render() {\n    if (\n      isEmpty(this.props.matches) ||\n      (this.props.status !== 'live-matches' &&\n        this.props.status !== 'development')\n    ) {\n      return (\n        <div className=\"PageList\">\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n          {this.renderMessage()}\n        </div>\n      );\n    }\n\n    if (this.state.searching) {\n      return (\n        <div className=\"PageList\">\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n\n          {Object.keys(this.state.searches).map(userId => {\n            const user = this.state.searches[userId];\n\n            if (!user.name) {\n              return <div />;\n            }\n\n            return <MatchView key={userId} {...user} />;\n          })}\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <div className=\"PageList\">\n          <Header>RESULTS</Header>\n          {this.renderSearch()}\n          <br />\n\n          {Object.keys(this.props.matches).map(matchId => {\n            const match = this.props.matches[matchId];\n            const matchedUser =\n              match.user1.id === this.props.uid ? match.user2 : match.user1;\n            const meUser =\n              match.user1.id !== this.props.uid ? match.user2 : match.user1;\n\n            if (!matchedUser.name) {\n              return <div />;\n            }\n\n            return (\n              <MatchView\n                canDate={match.canDate}\n                canDateOnClick={() =>\n                  this.canDateOnClick(match, matchedUser, matchId, meUser)\n                }\n                key={matchId}\n                {...matchedUser}\n              />\n            );\n          })}\n        </div>\n\n        {this.state.showRightSidebar && (\n          <RightSidebar\n            match={this.state.match}\n            matchedUser={this.state.matchedUser}\n            matchId={this.state.matchId}\n            meUser={this.state.meUser}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst MatchView = ({\n  canDate,\n  canDateOnClick,\n  description,\n  dorm,\n  name,\n  profile_pic,\n  year,\n}) => (\n  <div\n    style={{\n      display: 'flex',\n      marginBottom: 30,\n      maxWidth: 600,\n      position: 'relative',\n    }}\n  >\n    <img\n      alt=\"profile\"\n      src={profile_pic || require('assets/empty.png')}\n      style={{\n        width: 125,\n        height: 125,\n        objectFit: 'cover',\n        minWidth: 125,\n        background: `url(${require('assets/loading.svg')})`,\n        backgroundSize: 'contain',\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center',\n      }}\n    />\n    <div className=\"info\">\n      <div className=\"basics\">\n        {year.toUpperCase() + ', ' + dorm.toUpperCase()}\n        <br />\n        <div className=\"name\">{name}</div>\n        {/* <div className=\"icons\">\n          <Link\n            id=\"facebook\"\n            to={this.props.to ? this.props.to : '/'}\n          >\n            <img\n              src={require('assets/facebook.png')}\n              style={{ width: '31px', height: '31px' }}\n            />\n          </Link>\n          <Link id=\"spotify\" to={this.props.to ? this.props.to : '/'}>\n            <img\n              src={require('assets/spotify.png')}\n              style={{ width: '35px', height: '35px' }}\n            />\n          </Link>\n        </div> */}\n      </div>\n      <div className=\"description\">{description}</div>\n      {/*<div>{match.rating}</div>*/}\n      {!canDate ? (\n        <button id=\"match\">MATCH</button>\n      ) : (\n        <button onClick={canDateOnClick}>SCHEDULE FREE DATE</button>\n      )}\n    </div>\n    <br />\n    <br />\n  </div>\n);\n"]},"metadata":{},"sourceType":"module"}