{"ast":null,"code":"import _regeneratorRuntime from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/RestaurantPortal/RestaurantHome.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  font-weight: bold;\\n\\n  .conf-container {\\n    margin: 20px auto;\\n  }\\n\\n  button {\\n    max-width: 106px;\\n    height: 33px;\\n    background: #545353;\\n    font-weight: bold;\\n    font-size: 18px;\\n    line-height: 22px;\\n    letter-spacing: 0.05em;\\n  }\\n\\n  input {\\n    max-width: 359px;\\n    height: 40px;\\n    border: none;\\n    background: #f4f2f2;\\n    font-family: 'Apercu-light';\\n    display: flex;\\n    align-items: center;\\n    letter-spacing: 0.05em;\\n\\n    color: #545353;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n/** @jsx jsx **/\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\nimport Input from './components/Input';\nimport ConfirmationBox from './components/ConfirmationBox';\nimport Header from 'components/Header';\nvar checkInStyle = css(_templateObject());\n\nvar RestaurantHome =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RestaurantHome, _Component);\n\n  function RestaurantHome(props) {\n    var _this;\n\n    _classCallCheck(this, RestaurantHome);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RestaurantHome).call(this, props));\n\n    _this.handleInputChange = function (event) {\n      var code = event.target.value;\n\n      _this.setState({\n        code: code,\n        display: false,\n        errorMessage: '',\n        valid: null\n      });\n    };\n\n    _this.onClick = function _callee() {\n      var code, today, day, dataSnapshot, codeFound;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              code = _this.state.code;\n\n              if (!(code === '')) {\n                _context.next = 4;\n                break;\n              }\n\n              _this.setState({\n                valid: false,\n                display: true,\n                errorMessage: 'Please enter a confirmation code.'\n              });\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              today = new Date(new Date().toLocaleString('en-US', {\n                timeZone: 'America/New_York'\n              }));\n              day = today.getMonth() + 1 + '/' + today.getDate();\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(_this.props.firebase.ref('dates').orderByChild('place').equalTo(_this.props.restaurant).once('value'));\n\n            case 8:\n              dataSnapshot = _context.sent;\n              codeFound = false;\n              dataSnapshot.forEach(function (childSnapshot) {\n                var date = childSnapshot.val();\n\n                if (date.codes && Object.values(date.codes).includes(code)) {\n                  codeFound = true;\n\n                  if (date.day === day) {\n                    _this.setState({\n                      valid: true,\n                      display: true,\n                      errorMessage: ''\n                    });\n                  } else {\n                    _this.setState({\n                      valid: false,\n                      display: true,\n                      errorMessage: 'Wrong day! ' + code + ' is a valid code on ' + date.day + '.'\n                    });\n                  }\n                }\n              });\n\n              if (!codeFound) {\n                _this.setState({\n                  valid: false,\n                  display: true,\n                  errorMessage: code + ' is an invalid code.'\n                });\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.state = {\n      code: '',\n      display: false,\n      errorMessage: '',\n      valid: null\n    };\n    return _this;\n  }\n\n  _createClass(RestaurantHome, [{\n    key: \"render\",\n    value: function render() {\n      return jsx(\"div\", {\n        className: \"CheckIn\",\n        css: checkInStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, jsx(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"HOME\"), jsx(\"div\", {\n        className: \"conf-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, jsx(Input, {\n        handleInputChange: this.handleInputChange,\n        name: \"code\",\n        placeholder: \"ABC123\",\n        text: \"Type in confirmation code:\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), jsx(\"button\", {\n        onClick: this.onClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"\\u2714\\xA0Verify\")), jsx(ConfirmationBox, Object.assign({}, this.state, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })), jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RestaurantHome;\n}(Component);\n\nexport { RestaurantHome as default };","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/RestaurantPortal/RestaurantHome.js"],"names":["Component","jsx","css","Input","ConfirmationBox","Header","checkInStyle","RestaurantHome","props","handleInputChange","event","code","target","value","setState","display","errorMessage","valid","onClick","state","today","Date","toLocaleString","timeZone","day","getMonth","getDate","firebase","ref","orderByChild","equalTo","restaurant","once","dataSnapshot","codeFound","forEach","childSnapshot","date","val","codes","Object","values","includes"],"mappings":"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","sourcesContent":["/** @jsx jsx **/\n\nimport { Component } from 'react';\nimport { jsx, css } from '@emotion/core';\n\nimport Input from './components/Input';\nimport ConfirmationBox from './components/ConfirmationBox';\nimport Header from 'components/Header';\n\nconst checkInStyle = css`\n  font-weight: bold;\n\n  .conf-container {\n    margin: 20px auto;\n  }\n\n  button {\n    max-width: 106px;\n    height: 33px;\n    background: #545353;\n    font-weight: bold;\n    font-size: 18px;\n    line-height: 22px;\n    letter-spacing: 0.05em;\n  }\n\n  input {\n    max-width: 359px;\n    height: 40px;\n    border: none;\n    background: #f4f2f2;\n    font-family: 'Apercu-light';\n    display: flex;\n    align-items: center;\n    letter-spacing: 0.05em;\n\n    color: #545353;\n  }\n`;\n\nexport default class RestaurantHome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      code: '',\n      display: false,\n      errorMessage: '',\n      valid: null,\n    };\n  }\n\n  handleInputChange = event => {\n    const code = event.target.value;\n\n    this.setState({\n      code,\n      display: false,\n      errorMessage: '',\n      valid: null,\n    });\n  };\n\n  onClick = async () => {\n    const { code } = this.state;\n\n    if (code === '') {\n      this.setState({\n        valid: false,\n        display: true,\n        errorMessage: 'Please enter a confirmation code.',\n      });\n      return;\n    }\n\n    const today = new Date(\n      new Date().toLocaleString('en-US', {\n        timeZone: 'America/New_York',\n      }),\n    );\n\n    const day = today.getMonth() + 1 + '/' + today.getDate();\n\n    const dataSnapshot = await this.props.firebase\n      .ref('dates')\n      .orderByChild('place')\n      .equalTo(this.props.restaurant)\n      .once('value');\n\n    let codeFound = false;\n\n    dataSnapshot.forEach(childSnapshot => {\n      const date = childSnapshot.val();\n\n      if (date.codes && Object.values(date.codes).includes(code)) {\n        codeFound = true;\n\n        if (date.day === day) {\n          this.setState({\n            valid: true,\n            display: true,\n            errorMessage: '',\n          });\n        } else {\n          this.setState({\n            valid: false,\n            display: true,\n            errorMessage:\n              'Wrong day! ' + code + ' is a valid code on ' + date.day + '.',\n          });\n        }\n      }\n    });\n\n    if (!codeFound) {\n      this.setState({\n        valid: false,\n        display: true,\n        errorMessage: code + ' is an invalid code.',\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"CheckIn\" css={checkInStyle}>\n        <Header>HOME</Header>\n\n        <div className=\"conf-container\">\n          <Input\n            handleInputChange={this.handleInputChange}\n            name=\"code\"\n            placeholder=\"ABC123\"\n            text=\"Type in confirmation code:\"\n            type=\"text\"\n          />\n\n          <br />\n\n          <button onClick={this.onClick}>&#10004;&nbsp;Verify</button>\n        </div>\n\n        <ConfirmationBox {...this.state} />\n\n        <br />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}