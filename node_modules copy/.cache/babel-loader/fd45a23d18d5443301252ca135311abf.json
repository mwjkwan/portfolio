{"ast":null,"code":"import _classCallCheck from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/melissa/datamatch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/melissa/datamatch/src/pages/SchoolPortal/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { bindActionCreators } from 'redux';\nimport { firestoreConnect, firebaseConnect, isLoaded } from 'react-redux-firebase';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport Loading from 'components/Loading';\nimport PageLogin from 'components/Login';\n\nvar SchoolPortal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SchoolPortal, _Component);\n\n  function SchoolPortal() {\n    _classCallCheck(this, SchoolPortal);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SchoolPortal).apply(this, arguments));\n  }\n\n  _createClass(SchoolPortal, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          email = _this$props.email,\n          isLoggedIn = _this$props.isLoggedIn,\n          loginUser = _this$props.loginUser,\n          schoolAdmins = _this$props.schoolAdmins;\n\n      if (!isLoaded(this.props.schoolAdmins)) {\n        return React.createElement(\"div\", {\n          style: {\n            height: 200\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 21\n          },\n          __self: this\n        }, React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22\n          },\n          __self: this\n        }));\n      }\n\n      var schoolAdmin = schoolAdmins.admins_to_school[email];\n      return React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/school_portal\",\n        render: function render() {\n          if (!isLoggedIn) {\n            return React.createElement(PageLogin, {\n              loginUser: loginUser,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 36\n              },\n              __self: this\n            });\n          }\n\n          if (!schoolAdmin) {\n            return React.createElement(Redirect, {\n              to: \"/\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 40\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 43\n            },\n            __self: this\n          }, \"You are in!\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }), React.createElement(Route, {\n        component: function component() {\n          return React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 46\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SchoolPortal;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  console.log(state, props);\n  return {\n    loginUser: props.firebase.login,\n    isLoggedIn: state.firebase.auth.uid ? true : false,\n    email: state.firebase.auth.email,\n    schoolAdmins: state.firestore.data.school_admins\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({}, dispatch);\n}\n\nexport default compose(firebaseConnect(), firestoreConnect(function () {\n  return [{\n    collection: 'portals',\n    doc: 'school_admins',\n    storeAs: 'school_admins'\n  }];\n}), connect(mapStateToProps, mapDispatchToProps))(SchoolPortal);","map":{"version":3,"sources":["/Users/melissa/datamatch/src/pages/SchoolPortal/index.js"],"names":["React","Component","connect","compose","bindActionCreators","firestoreConnect","firebaseConnect","isLoaded","Route","Switch","Redirect","Loading","PageLogin","SchoolPortal","props","email","isLoggedIn","loginUser","schoolAdmins","height","schoolAdmin","admins_to_school","mapStateToProps","state","console","log","firebase","login","auth","uid","firestore","data","school_admins","mapDispatchToProps","dispatch","collection","doc","storeAs"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { bindActionCreators } from 'redux';\nimport {\n  firestoreConnect,\n  firebaseConnect,\n  isLoaded,\n} from 'react-redux-firebase';\nimport { Route, Switch, Redirect } from 'react-router-dom';\n\nimport Loading from 'components/Loading';\nimport PageLogin from 'components/Login';\n\nclass SchoolPortal extends Component {\n  render() {\n    const { email, isLoggedIn, loginUser, schoolAdmins } = this.props;\n\n    if (!isLoaded(this.props.schoolAdmins)) {\n      return (\n        <div style={{ height: 200 }}>\n          <Loading />\n        </div>\n      );\n    }\n\n    const schoolAdmin = schoolAdmins.admins_to_school[email];\n\n    return (\n      <Switch>\n        <Route\n          exact\n          path=\"/school_portal\"\n          render={() => {\n            if (!isLoggedIn) {\n              return <PageLogin loginUser={loginUser} />;\n            }\n\n            if (!schoolAdmin) {\n              return <Redirect to=\"/\" />;\n            }\n\n            return <h1>You are in!</h1>;\n          }}\n        />\n        <Route component={() => <Redirect to=\"/\" />} />\n      </Switch>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => {\n  console.log(state, props);\n\n  return {\n    loginUser: props.firebase.login,\n    isLoggedIn: state.firebase.auth.uid ? true : false,\n    email: state.firebase.auth.email,\n    schoolAdmins: state.firestore.data.school_admins,\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({}, dispatch);\n}\n\nexport default compose(\n  firebaseConnect(),\n  firestoreConnect(() => [\n    {\n      collection: 'portals',\n      doc: 'school_admins',\n      storeAs: 'school_admins',\n    },\n  ]),\n  connect(mapStateToProps, mapDispatchToProps),\n)(SchoolPortal);\n"]},"metadata":{},"sourceType":"module"}